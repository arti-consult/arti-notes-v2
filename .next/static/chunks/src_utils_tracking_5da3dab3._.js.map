{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/breyholtz%20holding/arti-notes/arti-notes-v3/src/utils/tracking/constants.ts"],"sourcesContent":["// src/utils/tracking/constants.ts\r\n\r\n// Cookie names\r\nexport const UTM_COOKIE_NAME = \"arti_utm_data\";\r\nexport const VISIT_COOKIE_NAME = \"arti_visit_data\";\r\nexport const ANONYMOUS_ID_COOKIE = \"arti_anonymous_id\";\r\n\r\n// Cookie settings\r\nexport const COOKIE_OPTIONS = {\r\n  expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days\r\n  path: \"/\",\r\n  sameSite: \"lax\" as const,\r\n  secure: process.env.NODE_ENV === \"production\",\r\n};\r\n"],"names":[],"mappings":"AAAA,kCAAkC;AAElC,eAAe;;;;;;;AAUL;AATH,MAAM,kBAAkB;AACxB,MAAM,oBAAoB;AAC1B,MAAM,sBAAsB;AAG5B,MAAM,iBAAiB;IAC5B,SAAS,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK,KAAK;IACnD,MAAM;IACN,UAAU;IACV,QAAQ,oDAAyB;AACnC","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///D:/breyholtz%20holding/arti-notes/arti-notes-v3/src/utils/tracking/client.ts"],"sourcesContent":["import { UTMParams } from \"./utm\";\r\nimport {\r\n  UTM_COOKIE_NAME,\r\n  VISIT_COOKIE_NAME,\r\n  ANONYMOUS_ID_COOKIE,\r\n} from \"./constants\";\r\n\r\n/**\r\n * Get UTM data from cookie on the client\r\n */\r\nexport function getClientUTMData(): UTMParams | null {\r\n  try {\r\n    const cookies = document.cookie.split(\";\");\r\n    const utmData = cookies.find((cookie) =>\r\n      cookie.trim().startsWith(`${UTM_COOKIE_NAME}=`)\r\n    );\r\n    return utmData\r\n      ? JSON.parse(decodeURIComponent(utmData.split(\"=\")[1]))\r\n      : null;\r\n  } catch (error) {\r\n    console.error(\"Error getting client UTM data:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get visit data from cookie on the client\r\n */\r\nexport function getClientVisitData(): {\r\n  first_visit?: string;\r\n  referrer?: string;\r\n  landing_page?: string;\r\n} | null {\r\n  try {\r\n    const cookies = document.cookie.split(\";\");\r\n    const visitData = cookies.find((cookie) =>\r\n      cookie.trim().startsWith(`${VISIT_COOKIE_NAME}=`)\r\n    );\r\n    return visitData\r\n      ? JSON.parse(decodeURIComponent(visitData.split(\"=\")[1]))\r\n      : null;\r\n  } catch (error) {\r\n    console.error(\"Error getting client visit data:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get anonymous ID from cookie on the client\r\n */\r\nexport function getClientAnonymousId(): string | null {\r\n  try {\r\n    const cookies = document.cookie.split(\";\");\r\n    const anonymousId = cookies.find((cookie) =>\r\n      cookie.trim().startsWith(`${ANONYMOUS_ID_COOKIE}=`)\r\n    );\r\n    return anonymousId ? decodeURIComponent(anonymousId.split(\"=\")[1]) : null;\r\n  } catch (error) {\r\n    console.error(\"Error getting client anonymous ID:\", error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Get all tracking data from cookies on the client\r\n */\r\nexport function getClientTrackingData(): {\r\n  utmData: UTMParams | null;\r\n  visitData: {\r\n    first_visit?: string;\r\n    referrer?: string;\r\n    landing_page?: string;\r\n  } | null;\r\n  anonymousId: string | null;\r\n} {\r\n  return {\r\n    utmData: getClientUTMData(),\r\n    visitData: getClientVisitData(),\r\n    anonymousId: getClientAnonymousId(),\r\n  };\r\n}\r\n\r\n/**\r\n * Set UTM data in cookie on the client\r\n */\r\nexport function setClientUTMData(data: UTMParams): void {\r\n  try {\r\n    const cookieValue = encodeURIComponent(JSON.stringify(data));\r\n    document.cookie = `${UTM_COOKIE_NAME}=${cookieValue}; path=/; max-age=${\r\n      30 * 24 * 60 * 60\r\n    }; sameSite=lax${process.env.NODE_ENV === \"production\" ? \"; secure\" : \"\"}`;\r\n  } catch (error) {\r\n    console.error(\"Error setting client UTM data:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * Set visit data in cookie on the client\r\n */\r\nexport function setClientVisitData(data: {\r\n  first_visit: string;\r\n  referrer?: string;\r\n  landing_page: string;\r\n}): void {\r\n  try {\r\n    const cookieValue = encodeURIComponent(JSON.stringify(data));\r\n    document.cookie = `${VISIT_COOKIE_NAME}=${cookieValue}; path=/; max-age=${\r\n      30 * 24 * 60 * 60\r\n    }; sameSite=lax${process.env.NODE_ENV === \"production\" ? \"; secure\" : \"\"}`;\r\n  } catch (error) {\r\n    console.error(\"Error setting client visit data:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * Set anonymous ID in cookie on the client\r\n */\r\nexport function setClientAnonymousId(id: string): void {\r\n  try {\r\n    document.cookie = `${ANONYMOUS_ID_COOKIE}=${id}; path=/; max-age=${\r\n      365 * 24 * 60 * 60\r\n    }; sameSite=lax${process.env.NODE_ENV === \"production\" ? \"; secure\" : \"\"}`;\r\n  } catch (error) {\r\n    console.error(\"Error setting client anonymous ID:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all tracking cookies on the client\r\n */\r\nexport function clearClientTrackingCookies(): void {\r\n  try {\r\n    document.cookie = `${UTM_COOKIE_NAME}=; path=/; max-age=0`;\r\n    document.cookie = `${VISIT_COOKIE_NAME}=; path=/; max-age=0`;\r\n    document.cookie = `${ANONYMOUS_ID_COOKIE}=; path=/; max-age=0`;\r\n  } catch (error) {\r\n    console.error(\"Error clearing client tracking cookies:\", error);\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AA0FqB;AAzFrB;;AASO,SAAS;IACd,IAAI;QACF,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,UAAU,QAAQ,IAAI,CAAC,CAAC,SAC5B,OAAO,IAAI,GAAG,UAAU,CAAC,GAAG,wIAAA,CAAA,kBAAe,CAAC,CAAC,CAAC;QAEhD,OAAO,UACH,KAAK,KAAK,CAAC,mBAAmB,QAAQ,KAAK,CAAC,IAAI,CAAC,EAAE,KACnD;IACN,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;IACT;AACF;AAKO,SAAS;IAKd,IAAI;QACF,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,YAAY,QAAQ,IAAI,CAAC,CAAC,SAC9B,OAAO,IAAI,GAAG,UAAU,CAAC,GAAG,wIAAA,CAAA,oBAAiB,CAAC,CAAC,CAAC;QAElD,OAAO,YACH,KAAK,KAAK,CAAC,mBAAmB,UAAU,KAAK,CAAC,IAAI,CAAC,EAAE,KACrD;IACN,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;IACT;AACF;AAKO,SAAS;IACd,IAAI;QACF,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,cAAc,QAAQ,IAAI,CAAC,CAAC,SAChC,OAAO,IAAI,GAAG,UAAU,CAAC,GAAG,wIAAA,CAAA,sBAAmB,CAAC,CAAC,CAAC;QAEpD,OAAO,cAAc,mBAAmB,YAAY,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;IACvE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO;IACT;AACF;AAKO,SAAS;IASd,OAAO;QACL,SAAS;QACT,WAAW;QACX,aAAa;IACf;AACF;AAKO,SAAS,iBAAiB,IAAe;IAC9C,IAAI;QACF,MAAM,cAAc,mBAAmB,KAAK,SAAS,CAAC;QACtD,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,kBAAe,CAAC,CAAC,EAAE,YAAY,kBAAkB,EACpE,KAAK,KAAK,KAAK,GAChB,cAAc,EAAE,6EAAqD,IAAI;IAC5E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;IAClD;AACF;AAKO,SAAS,mBAAmB,IAIlC;IACC,IAAI;QACF,MAAM,cAAc,mBAAmB,KAAK,SAAS,CAAC;QACtD,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,oBAAiB,CAAC,CAAC,EAAE,YAAY,kBAAkB,EACtE,KAAK,KAAK,KAAK,GAChB,cAAc,EAAE,6EAAqD,IAAI;IAC5E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;IACpD;AACF;AAKO,SAAS,qBAAqB,EAAU;IAC7C,IAAI;QACF,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,sBAAmB,CAAC,CAAC,EAAE,GAAG,kBAAkB,EAC/D,MAAM,KAAK,KAAK,GACjB,cAAc,EAAE,6EAAqD,IAAI;IAC5E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;IACtD;AACF;AAKO,SAAS;IACd,IAAI;QACF,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,kBAAe,CAAC,oBAAoB,CAAC;QAC1D,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,oBAAiB,CAAC,oBAAoB,CAAC;QAC5D,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,sBAAmB,CAAC,oBAAoB,CAAC;IAChE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;IAC3D;AACF","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///D:/breyholtz%20holding/arti-notes/arti-notes-v3/src/utils/tracking/utm.ts"],"sourcesContent":["// src/utils/tracking/utm.ts\r\nimport {\r\n  getClientUTMData,\r\n  getClientVisitData,\r\n  setClientUTMData,\r\n  setClientVisitData,\r\n  clearClientTrackingCookies,\r\n} from \"./client\";\r\n\r\nexport interface UTMParams {\r\n  utm_source?: string;\r\n  utm_medium?: string;\r\n  utm_campaign?: string;\r\n  utm_term?: string;\r\n  utm_content?: string;\r\n  referrer?: string;\r\n  landing_page?: string;\r\n  first_visit?: string;\r\n}\r\n\r\n/**\r\n * Capture UTM parameters from URL and store in cookies\r\n */\r\nexport async function captureUTMParameters(\r\n  searchParamsString?: string\r\n): Promise<UTMParams> {\r\n  try {\r\n    // If we have a search params string, parse it directly\r\n    if (searchParamsString) {\r\n      const searchParams = new URLSearchParams(searchParamsString);\r\n\r\n      // Extract UTM parameters\r\n      const utmParams: UTMParams = {\r\n        utm_source: searchParams.get(\"utm_source\") || undefined,\r\n        utm_medium: searchParams.get(\"utm_medium\") || undefined,\r\n        utm_campaign: searchParams.get(\"utm_campaign\") || undefined,\r\n        utm_term: searchParams.get(\"utm_term\") || undefined,\r\n        utm_content: searchParams.get(\"utm_content\") || undefined,\r\n      };\r\n\r\n      // Only save if at least one UTM parameter is present\r\n      if (Object.values(utmParams).some((value) => value)) {\r\n        setClientUTMData(utmParams);\r\n      }\r\n\r\n      return utmParams;\r\n    }\r\n\r\n    // If no search params string provided, use current window URL\r\n    if (typeof window !== \"undefined\") {\r\n      const currentUrl = window.location.href;\r\n      const urlObj = new URL(currentUrl);\r\n\r\n      // Extract UTM parameters\r\n      const utmParams: UTMParams = {\r\n        utm_source: urlObj.searchParams.get(\"utm_source\") || undefined,\r\n        utm_medium: urlObj.searchParams.get(\"utm_medium\") || undefined,\r\n        utm_campaign: urlObj.searchParams.get(\"utm_campaign\") || undefined,\r\n        utm_term: urlObj.searchParams.get(\"utm_term\") || undefined,\r\n        utm_content: urlObj.searchParams.get(\"utm_content\") || undefined,\r\n      };\r\n\r\n      // Only save if at least one UTM parameter is present\r\n      if (Object.values(utmParams).some((value) => value)) {\r\n        setClientUTMData(utmParams);\r\n      }\r\n\r\n      return utmParams;\r\n    }\r\n\r\n    return {};\r\n  } catch (error) {\r\n    console.error(\"Error capturing UTM parameters:\", error);\r\n    return {};\r\n  }\r\n}\r\n\r\n/**\r\n * Capture visit data and store in cookies\r\n */\r\nexport async function captureVisitData(): Promise<void> {\r\n  if (typeof window === \"undefined\") return;\r\n\r\n  try {\r\n    const visitData = {\r\n      first_visit: new Date().toISOString(),\r\n      referrer: document.referrer || undefined,\r\n      landing_page: window.location.href,\r\n    };\r\n\r\n    setClientVisitData(visitData);\r\n  } catch (error) {\r\n    console.error(\"Error capturing visit data:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * Get UTM data from cookie\r\n */\r\nexport async function getUTMDataFromCookie(): Promise<UTMParams | null> {\r\n  return getClientUTMData();\r\n}\r\n\r\n/**\r\n * Get visit data from cookie\r\n */\r\nexport async function getVisitDataFromCookie(): Promise<{\r\n  first_visit?: string;\r\n  referrer?: string;\r\n  landing_page?: string;\r\n} | null> {\r\n  return getClientVisitData();\r\n}\r\n\r\n/**\r\n * Get all tracking data (UTM + visit data)\r\n */\r\nexport async function getAllTrackingData(): Promise<UTMParams> {\r\n  const utmData = (await getUTMDataFromCookie()) || {};\r\n  const visitData = (await getVisitDataFromCookie()) || {};\r\n\r\n  return {\r\n    ...utmData,\r\n    ...visitData,\r\n  };\r\n}\r\n\r\n/**\r\n * Clear all tracking cookies\r\n */\r\nexport async function clearTrackingCookies(): Promise<void> {\r\n  clearClientTrackingCookies();\r\n}\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;;;;AAC5B;;AAsBO,eAAe,qBACpB,kBAA2B;IAE3B,IAAI;QACF,uDAAuD;QACvD,IAAI,oBAAoB;YACtB,MAAM,eAAe,IAAI,gBAAgB;YAEzC,yBAAyB;YACzB,MAAM,YAAuB;gBAC3B,YAAY,aAAa,GAAG,CAAC,iBAAiB;gBAC9C,YAAY,aAAa,GAAG,CAAC,iBAAiB;gBAC9C,cAAc,aAAa,GAAG,CAAC,mBAAmB;gBAClD,UAAU,aAAa,GAAG,CAAC,eAAe;gBAC1C,aAAa,aAAa,GAAG,CAAC,kBAAkB;YAClD;YAEA,qDAAqD;YACrD,IAAI,OAAO,MAAM,CAAC,WAAW,IAAI,CAAC,CAAC,QAAU,QAAQ;gBACnD,CAAA,GAAA,qIAAA,CAAA,mBAAgB,AAAD,EAAE;YACnB;YAEA,OAAO;QACT;QAEA,8DAA8D;QAC9D,wCAAmC;YACjC,MAAM,aAAa,OAAO,QAAQ,CAAC,IAAI;YACvC,MAAM,SAAS,IAAI,IAAI;YAEvB,yBAAyB;YACzB,MAAM,YAAuB;gBAC3B,YAAY,OAAO,YAAY,CAAC,GAAG,CAAC,iBAAiB;gBACrD,YAAY,OAAO,YAAY,CAAC,GAAG,CAAC,iBAAiB;gBACrD,cAAc,OAAO,YAAY,CAAC,GAAG,CAAC,mBAAmB;gBACzD,UAAU,OAAO,YAAY,CAAC,GAAG,CAAC,eAAe;gBACjD,aAAa,OAAO,YAAY,CAAC,GAAG,CAAC,kBAAkB;YACzD;YAEA,qDAAqD;YACrD,IAAI,OAAO,MAAM,CAAC,WAAW,IAAI,CAAC,CAAC,QAAU,QAAQ;gBACnD,CAAA,GAAA,qIAAA,CAAA,mBAAgB,AAAD,EAAE;YACnB;YAEA,OAAO;QACT;;IAGF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,CAAC;IACV;AACF;AAKO,eAAe;IACpB,uCAAmC;;IAAM;IAEzC,IAAI;QACF,MAAM,YAAY;YAChB,aAAa,IAAI,OAAO,WAAW;YACnC,UAAU,SAAS,QAAQ,IAAI;YAC/B,cAAc,OAAO,QAAQ,CAAC,IAAI;QACpC;QAEA,CAAA,GAAA,qIAAA,CAAA,qBAAkB,AAAD,EAAE;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;IAC/C;AACF;AAKO,eAAe;IACpB,OAAO,CAAA,GAAA,qIAAA,CAAA,mBAAgB,AAAD;AACxB;AAKO,eAAe;IAKpB,OAAO,CAAA,GAAA,qIAAA,CAAA,qBAAkB,AAAD;AAC1B;AAKO,eAAe;IACpB,MAAM,UAAU,AAAC,MAAM,0BAA2B,CAAC;IACnD,MAAM,YAAY,AAAC,MAAM,4BAA6B,CAAC;IAEvD,OAAO;QACL,GAAG,OAAO;QACV,GAAG,SAAS;IACd;AACF;AAKO,eAAe;IACpB,CAAA,GAAA,qIAAA,CAAA,6BAA0B,AAAD;AAC3B","debugId":null}}]
}