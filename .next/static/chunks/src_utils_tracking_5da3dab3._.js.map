{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/maryniukk/Documents/Work/arti-notes-v2-main/src/utils/tracking/constants.ts"],"sourcesContent":["// src/utils/tracking/constants.ts\n\n// Cookie names\nexport const UTM_COOKIE_NAME = \"arti_utm_data\";\nexport const VISIT_COOKIE_NAME = \"arti_visit_data\";\nexport const ANONYMOUS_ID_COOKIE = \"arti_anonymous_id\";\n\n// Cookie settings\nexport const COOKIE_OPTIONS = {\n  expires: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days\n  path: \"/\",\n  sameSite: \"lax\" as const,\n  secure: process.env.NODE_ENV === \"production\",\n};\n"],"names":[],"mappings":"AAAA,kCAAkC;AAElC,eAAe;;;;;;;AAUL;AATH,MAAM,kBAAkB;AACxB,MAAM,oBAAoB;AAC1B,MAAM,sBAAsB;AAG5B,MAAM,iBAAiB;IAC5B,SAAS,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK,KAAK;IACnD,MAAM;IACN,UAAU;IACV,QAAQ,oDAAyB;AACnC","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///Users/maryniukk/Documents/Work/arti-notes-v2-main/src/utils/tracking/client.ts"],"sourcesContent":["import { UTMParams } from \"./utm\";\nimport {\n  UTM_COOKIE_NAME,\n  VISIT_COOKIE_NAME,\n  ANONYMOUS_ID_COOKIE,\n} from \"./constants\";\n\n/**\n * Get UTM data from cookie on the client\n */\nexport function getClientUTMData(): UTMParams | null {\n  try {\n    const cookies = document.cookie.split(\";\");\n    const utmData = cookies.find((cookie) =>\n      cookie.trim().startsWith(`${UTM_COOKIE_NAME}=`)\n    );\n    return utmData\n      ? JSON.parse(decodeURIComponent(utmData.split(\"=\")[1]))\n      : null;\n  } catch (error) {\n    console.error(\"Error getting client UTM data:\", error);\n    return null;\n  }\n}\n\n/**\n * Get visit data from cookie on the client\n */\nexport function getClientVisitData(): {\n  first_visit?: string;\n  referrer?: string;\n  landing_page?: string;\n} | null {\n  try {\n    const cookies = document.cookie.split(\";\");\n    const visitData = cookies.find((cookie) =>\n      cookie.trim().startsWith(`${VISIT_COOKIE_NAME}=`)\n    );\n    return visitData\n      ? JSON.parse(decodeURIComponent(visitData.split(\"=\")[1]))\n      : null;\n  } catch (error) {\n    console.error(\"Error getting client visit data:\", error);\n    return null;\n  }\n}\n\n/**\n * Get anonymous ID from cookie on the client\n */\nexport function getClientAnonymousId(): string | null {\n  try {\n    const cookies = document.cookie.split(\";\");\n    const anonymousId = cookies.find((cookie) =>\n      cookie.trim().startsWith(`${ANONYMOUS_ID_COOKIE}=`)\n    );\n    return anonymousId ? decodeURIComponent(anonymousId.split(\"=\")[1]) : null;\n  } catch (error) {\n    console.error(\"Error getting client anonymous ID:\", error);\n    return null;\n  }\n}\n\n/**\n * Get all tracking data from cookies on the client\n */\nexport function getClientTrackingData(): {\n  utmData: UTMParams | null;\n  visitData: {\n    first_visit?: string;\n    referrer?: string;\n    landing_page?: string;\n  } | null;\n  anonymousId: string | null;\n} {\n  return {\n    utmData: getClientUTMData(),\n    visitData: getClientVisitData(),\n    anonymousId: getClientAnonymousId(),\n  };\n}\n\n/**\n * Set UTM data in cookie on the client\n */\nexport function setClientUTMData(data: UTMParams): void {\n  try {\n    const cookieValue = encodeURIComponent(JSON.stringify(data));\n    document.cookie = `${UTM_COOKIE_NAME}=${cookieValue}; path=/; max-age=${\n      30 * 24 * 60 * 60\n    }; sameSite=lax${process.env.NODE_ENV === \"production\" ? \"; secure\" : \"\"}`;\n  } catch (error) {\n    console.error(\"Error setting client UTM data:\", error);\n  }\n}\n\n/**\n * Set visit data in cookie on the client\n */\nexport function setClientVisitData(data: {\n  first_visit: string;\n  referrer?: string;\n  landing_page: string;\n}): void {\n  try {\n    const cookieValue = encodeURIComponent(JSON.stringify(data));\n    document.cookie = `${VISIT_COOKIE_NAME}=${cookieValue}; path=/; max-age=${\n      30 * 24 * 60 * 60\n    }; sameSite=lax${process.env.NODE_ENV === \"production\" ? \"; secure\" : \"\"}`;\n  } catch (error) {\n    console.error(\"Error setting client visit data:\", error);\n  }\n}\n\n/**\n * Set anonymous ID in cookie on the client\n */\nexport function setClientAnonymousId(id: string): void {\n  try {\n    document.cookie = `${ANONYMOUS_ID_COOKIE}=${id}; path=/; max-age=${\n      365 * 24 * 60 * 60\n    }; sameSite=lax${process.env.NODE_ENV === \"production\" ? \"; secure\" : \"\"}`;\n  } catch (error) {\n    console.error(\"Error setting client anonymous ID:\", error);\n  }\n}\n\n/**\n * Clear all tracking cookies on the client\n */\nexport function clearClientTrackingCookies(): void {\n  try {\n    document.cookie = `${UTM_COOKIE_NAME}=; path=/; max-age=0`;\n    document.cookie = `${VISIT_COOKIE_NAME}=; path=/; max-age=0`;\n    document.cookie = `${ANONYMOUS_ID_COOKIE}=; path=/; max-age=0`;\n  } catch (error) {\n    console.error(\"Error clearing client tracking cookies:\", error);\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;AA0FqB;AAzFrB;;AASO,SAAS;IACd,IAAI;QACF,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,UAAU,QAAQ,IAAI,CAAC,CAAC,SAC5B,OAAO,IAAI,GAAG,UAAU,CAAC,GAAG,wIAAA,CAAA,kBAAe,CAAC,CAAC,CAAC;QAEhD,OAAO,UACH,KAAK,KAAK,CAAC,mBAAmB,QAAQ,KAAK,CAAC,IAAI,CAAC,EAAE,KACnD;IACN,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;IACT;AACF;AAKO,SAAS;IAKd,IAAI;QACF,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,YAAY,QAAQ,IAAI,CAAC,CAAC,SAC9B,OAAO,IAAI,GAAG,UAAU,CAAC,GAAG,wIAAA,CAAA,oBAAiB,CAAC,CAAC,CAAC;QAElD,OAAO,YACH,KAAK,KAAK,CAAC,mBAAmB,UAAU,KAAK,CAAC,IAAI,CAAC,EAAE,KACrD;IACN,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;IACT;AACF;AAKO,SAAS;IACd,IAAI;QACF,MAAM,UAAU,SAAS,MAAM,CAAC,KAAK,CAAC;QACtC,MAAM,cAAc,QAAQ,IAAI,CAAC,CAAC,SAChC,OAAO,IAAI,GAAG,UAAU,CAAC,GAAG,wIAAA,CAAA,sBAAmB,CAAC,CAAC,CAAC;QAEpD,OAAO,cAAc,mBAAmB,YAAY,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI;IACvE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO;IACT;AACF;AAKO,SAAS;IASd,OAAO;QACL,SAAS;QACT,WAAW;QACX,aAAa;IACf;AACF;AAKO,SAAS,iBAAiB,IAAe;IAC9C,IAAI;QACF,MAAM,cAAc,mBAAmB,KAAK,SAAS,CAAC;QACtD,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,kBAAe,CAAC,CAAC,EAAE,YAAY,kBAAkB,EACpE,KAAK,KAAK,KAAK,GAChB,cAAc,EAAE,6EAAqD,IAAI;IAC5E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;IAClD;AACF;AAKO,SAAS,mBAAmB,IAIlC;IACC,IAAI;QACF,MAAM,cAAc,mBAAmB,KAAK,SAAS,CAAC;QACtD,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,oBAAiB,CAAC,CAAC,EAAE,YAAY,kBAAkB,EACtE,KAAK,KAAK,KAAK,GAChB,cAAc,EAAE,6EAAqD,IAAI;IAC5E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;IACpD;AACF;AAKO,SAAS,qBAAqB,EAAU;IAC7C,IAAI;QACF,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,sBAAmB,CAAC,CAAC,EAAE,GAAG,kBAAkB,EAC/D,MAAM,KAAK,KAAK,GACjB,cAAc,EAAE,6EAAqD,IAAI;IAC5E,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;IACtD;AACF;AAKO,SAAS;IACd,IAAI;QACF,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,kBAAe,CAAC,oBAAoB,CAAC;QAC1D,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,oBAAiB,CAAC,oBAAoB,CAAC;QAC5D,SAAS,MAAM,GAAG,GAAG,wIAAA,CAAA,sBAAmB,CAAC,oBAAoB,CAAC;IAChE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2CAA2C;IAC3D;AACF","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///Users/maryniukk/Documents/Work/arti-notes-v2-main/src/utils/tracking/utm.ts"],"sourcesContent":["// src/utils/tracking/utm.ts\nimport {\n  getClientUTMData,\n  getClientVisitData,\n  setClientUTMData,\n  setClientVisitData,\n  clearClientTrackingCookies,\n} from \"./client\";\n\nexport interface UTMParams {\n  utm_source?: string;\n  utm_medium?: string;\n  utm_campaign?: string;\n  utm_term?: string;\n  utm_content?: string;\n  referrer?: string;\n  landing_page?: string;\n  first_visit?: string;\n}\n\n/**\n * Capture UTM parameters from URL and store in cookies\n */\nexport async function captureUTMParameters(\n  searchParamsString?: string\n): Promise<UTMParams> {\n  try {\n    // If we have a search params string, parse it directly\n    if (searchParamsString) {\n      const searchParams = new URLSearchParams(searchParamsString);\n\n      // Extract UTM parameters\n      const utmParams: UTMParams = {\n        utm_source: searchParams.get(\"utm_source\") || undefined,\n        utm_medium: searchParams.get(\"utm_medium\") || undefined,\n        utm_campaign: searchParams.get(\"utm_campaign\") || undefined,\n        utm_term: searchParams.get(\"utm_term\") || undefined,\n        utm_content: searchParams.get(\"utm_content\") || undefined,\n      };\n\n      // Only save if at least one UTM parameter is present\n      if (Object.values(utmParams).some((value) => value)) {\n        setClientUTMData(utmParams);\n      }\n\n      return utmParams;\n    }\n\n    // If no search params string provided, use current window URL\n    if (typeof window !== \"undefined\") {\n      const currentUrl = window.location.href;\n      const urlObj = new URL(currentUrl);\n\n      // Extract UTM parameters\n      const utmParams: UTMParams = {\n        utm_source: urlObj.searchParams.get(\"utm_source\") || undefined,\n        utm_medium: urlObj.searchParams.get(\"utm_medium\") || undefined,\n        utm_campaign: urlObj.searchParams.get(\"utm_campaign\") || undefined,\n        utm_term: urlObj.searchParams.get(\"utm_term\") || undefined,\n        utm_content: urlObj.searchParams.get(\"utm_content\") || undefined,\n      };\n\n      // Only save if at least one UTM parameter is present\n      if (Object.values(utmParams).some((value) => value)) {\n        setClientUTMData(utmParams);\n      }\n\n      return utmParams;\n    }\n\n    return {};\n  } catch (error) {\n    console.error(\"Error capturing UTM parameters:\", error);\n    return {};\n  }\n}\n\n/**\n * Capture visit data and store in cookies\n */\nexport async function captureVisitData(): Promise<void> {\n  if (typeof window === \"undefined\") return;\n\n  try {\n    const visitData = {\n      first_visit: new Date().toISOString(),\n      referrer: document.referrer || undefined,\n      landing_page: window.location.href,\n    };\n\n    setClientVisitData(visitData);\n  } catch (error) {\n    console.error(\"Error capturing visit data:\", error);\n  }\n}\n\n/**\n * Get UTM data from cookie\n */\nexport async function getUTMDataFromCookie(): Promise<UTMParams | null> {\n  return getClientUTMData();\n}\n\n/**\n * Get visit data from cookie\n */\nexport async function getVisitDataFromCookie(): Promise<{\n  first_visit?: string;\n  referrer?: string;\n  landing_page?: string;\n} | null> {\n  return getClientVisitData();\n}\n\n/**\n * Get all tracking data (UTM + visit data)\n */\nexport async function getAllTrackingData(): Promise<UTMParams> {\n  const utmData = (await getUTMDataFromCookie()) || {};\n  const visitData = (await getVisitDataFromCookie()) || {};\n\n  return {\n    ...utmData,\n    ...visitData,\n  };\n}\n\n/**\n * Clear all tracking cookies\n */\nexport async function clearTrackingCookies(): Promise<void> {\n  clearClientTrackingCookies();\n}\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;;;;AAC5B;;AAsBO,eAAe,qBACpB,kBAA2B;IAE3B,IAAI;QACF,uDAAuD;QACvD,IAAI,oBAAoB;YACtB,MAAM,eAAe,IAAI,gBAAgB;YAEzC,yBAAyB;YACzB,MAAM,YAAuB;gBAC3B,YAAY,aAAa,GAAG,CAAC,iBAAiB;gBAC9C,YAAY,aAAa,GAAG,CAAC,iBAAiB;gBAC9C,cAAc,aAAa,GAAG,CAAC,mBAAmB;gBAClD,UAAU,aAAa,GAAG,CAAC,eAAe;gBAC1C,aAAa,aAAa,GAAG,CAAC,kBAAkB;YAClD;YAEA,qDAAqD;YACrD,IAAI,OAAO,MAAM,CAAC,WAAW,IAAI,CAAC,CAAC,QAAU,QAAQ;gBACnD,CAAA,GAAA,qIAAA,CAAA,mBAAgB,AAAD,EAAE;YACnB;YAEA,OAAO;QACT;QAEA,8DAA8D;QAC9D,wCAAmC;YACjC,MAAM,aAAa,OAAO,QAAQ,CAAC,IAAI;YACvC,MAAM,SAAS,IAAI,IAAI;YAEvB,yBAAyB;YACzB,MAAM,YAAuB;gBAC3B,YAAY,OAAO,YAAY,CAAC,GAAG,CAAC,iBAAiB;gBACrD,YAAY,OAAO,YAAY,CAAC,GAAG,CAAC,iBAAiB;gBACrD,cAAc,OAAO,YAAY,CAAC,GAAG,CAAC,mBAAmB;gBACzD,UAAU,OAAO,YAAY,CAAC,GAAG,CAAC,eAAe;gBACjD,aAAa,OAAO,YAAY,CAAC,GAAG,CAAC,kBAAkB;YACzD;YAEA,qDAAqD;YACrD,IAAI,OAAO,MAAM,CAAC,WAAW,IAAI,CAAC,CAAC,QAAU,QAAQ;gBACnD,CAAA,GAAA,qIAAA,CAAA,mBAAgB,AAAD,EAAE;YACnB;YAEA,OAAO;QACT;;IAGF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,CAAC;IACV;AACF;AAKO,eAAe;IACpB,uCAAmC;;IAAM;IAEzC,IAAI;QACF,MAAM,YAAY;YAChB,aAAa,IAAI,OAAO,WAAW;YACnC,UAAU,SAAS,QAAQ,IAAI;YAC/B,cAAc,OAAO,QAAQ,CAAC,IAAI;QACpC;QAEA,CAAA,GAAA,qIAAA,CAAA,qBAAkB,AAAD,EAAE;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;IAC/C;AACF;AAKO,eAAe;IACpB,OAAO,CAAA,GAAA,qIAAA,CAAA,mBAAgB,AAAD;AACxB;AAKO,eAAe;IAKpB,OAAO,CAAA,GAAA,qIAAA,CAAA,qBAAkB,AAAD;AAC1B;AAKO,eAAe;IACpB,MAAM,UAAU,AAAC,MAAM,0BAA2B,CAAC;IACnD,MAAM,YAAY,AAAC,MAAM,4BAA6B,CAAC;IAEvD,OAAO;QACL,GAAG,OAAO;QACV,GAAG,SAAS;IACd;AACF;AAKO,eAAe;IACpB,CAAA,GAAA,qIAAA,CAAA,6BAA0B,AAAD;AAC3B","debugId":null}}]
}