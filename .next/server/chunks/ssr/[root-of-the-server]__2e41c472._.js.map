{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/ui/toast.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold [&+div]:text-xs\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,gBAAgB,iKAAA,CAAA,WAAwB;AAE9C,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGnC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qIACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,iKAAA,CAAA,WAAwB,CAAC,WAAW;AAEhE,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6lBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE;IACnC,qBACE,8OAAC,iKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;AACA,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAoB,CAAC,WAAW;AAEpD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,SAAsB;QACrB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2dACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,iKAAA,CAAA,SAAsB,CAAC,WAAW;AAE5D,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,yVACA;QAEF,eAAY;QACX,GAAG,KAAK;kBAET,cAAA,8OAAC,4LAAA,CAAA,IAAC;YAAC,WAAU;;;;;;;;;;;AAGjB,WAAW,WAAW,GAAG,iKAAA,CAAA,QAAqB,CAAC,WAAW;AAE1D,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,iKAAA,CAAA,QAAqB,CAAC,WAAW;AAE1D,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,cAA2B;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sBAAsB;QACnC,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,iKAAA,CAAA,cAA2B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/lib/audioDuration.ts"],"sourcesContent":["import { toast } from '@/components/ui/toast';\n\ninterface AudioDurationOptions {\n  fallbackDuration?: number;\n  timeout?: number;\n}\n\n/**\n * Get audio duration using multiple methods\n */\nexport async function getAudioDuration(\n  blob: Blob,\n  options: AudioDurationOptions = {}\n): Promise<number> {\n  const { \n    fallbackDuration = 1,\n    timeout = 5000 \n  } = options || {};\n\n  // Input validation\n  if (!blob || blob.size === 0) {\n    console.warn('Invalid blob provided to getAudioDuration');\n    return Math.max(1, fallbackDuration);\n  }\n\n  // Method 1: Web Audio API\n  async function getWebAudioDuration(): Promise<number> {\n    const audioContext = new AudioContext();\n    try {\n      const arrayBuffer = await blob.arrayBuffer();\n      const audioBuffer = await audioContext.decodeAudioData(arrayBuffer);\n      const duration = Math.max(1, Math.round(audioBuffer.duration));\n      console.log('Web Audio API duration:', duration);\n      return duration;\n    } catch (error) {\n      console.warn('Web Audio API duration failed:', error);\n      return 0;\n    } finally {\n      audioContext.close().catch(console.warn);\n    }\n  }\n\n  // Method 2: HTML Audio element\n  async function getAudioElementDuration(): Promise<number> {\n    return new Promise((resolve) => {\n      const audio = new Audio();\n      const objectUrl = URL.createObjectURL(blob);\n      \n      const timeoutId = setTimeout(() => {\n        URL.revokeObjectURL(objectUrl);\n        resolve(0);\n      }, timeout);\n\n      audio.addEventListener('loadedmetadata', () => {\n        clearTimeout(timeoutId);\n        URL.revokeObjectURL(objectUrl);\n        const duration = Math.max(1, Math.round(audio.duration));\n        console.log('Audio element duration:', duration);\n        resolve(duration);\n      });\n\n      audio.addEventListener('error', () => {\n        clearTimeout(timeoutId);\n        URL.revokeObjectURL(objectUrl);\n        resolve(0);\n      });\n\n      audio.src = objectUrl;\n    });\n  }\n\n  // Method 3: MediaSource API\n  async function getMediaSourceDuration(): Promise<number> {\n    return new Promise((resolve) => {\n      const mediaSource = new MediaSource();\n      const url = URL.createObjectURL(mediaSource);\n      const audio = new Audio(url);\n      \n      const timeoutId = setTimeout(() => {\n        URL.revokeObjectURL(url);\n        resolve(0);\n      }, timeout);\n\n      mediaSource.addEventListener('sourceopen', async () => {\n        try {\n          const sourceBuffer = mediaSource.addSourceBuffer(blob.type);\n          const arrayBuffer = await blob.arrayBuffer();\n          \n          sourceBuffer.addEventListener('updateend', () => {\n            clearTimeout(timeoutId);\n            URL.revokeObjectURL(url);\n            const duration = Math.max(1, Math.round(mediaSource.duration));\n            console.log('MediaSource duration:', duration);\n            resolve(duration);\n          });\n\n          sourceBuffer.appendBuffer(arrayBuffer);\n        } catch (error) {\n          console.warn('MediaSource duration failed:', error);\n          clearTimeout(timeoutId);\n          URL.revokeObjectURL(url);\n          resolve(0);\n        }\n      });\n    });\n  }\n\n  try {\n    // Try all methods in parallel\n    const [webAudioDuration, audioElementDuration, mediaSourceDuration] = \n      await Promise.all([\n        getWebAudioDuration(),\n        getAudioElementDuration(),\n        getMediaSourceDuration()\n      ]);\n\n    console.log('Duration results:', {\n      webAudio: webAudioDuration,\n      audioElement: audioElementDuration,\n      mediaSource: mediaSourceDuration,\n      fallback: fallbackDuration\n    });\n\n    // Use the most reliable duration\n    const durations = [webAudioDuration, audioElementDuration, mediaSourceDuration]\n      .filter(d => Number.isFinite(d) && d > 0);\n    \n    console.log('Valid durations:', durations);\n\n    if (durations.length === 0) {\n      console.warn('All duration methods failed, using fallback');\n      return Math.max(1, Math.round(fallbackDuration));\n    }\n\n    // Use the median duration\n    durations.sort((a, b) => a - b);\n    const medianDuration = durations[Math.floor(durations.length / 2)];\n    const finalDuration = Math.max(1, Math.round(medianDuration));\n    \n    console.log('Final duration:', {\n      median: medianDuration,\n      final: finalDuration,\n      durations\n    });\n    \n    return finalDuration;\n  } catch (error) {\n    console.error('Error getting audio duration:', error);\n    const fallbackValue = Math.max(1, Math.round(fallbackDuration || 1));\n    console.log('Using fallback duration after error:', fallbackValue);\n    return fallbackValue;\n  }\n}"],"names":[],"mappings":";;;AAUO,eAAe,iBACpB,IAAU,EACV,UAAgC,CAAC,CAAC;IAElC,MAAM,EACJ,mBAAmB,CAAC,EACpB,UAAU,IAAI,EACf,GAAG,WAAW,CAAC;IAEhB,mBAAmB;IACnB,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,GAAG;QAC5B,QAAQ,IAAI,CAAC;QACb,OAAO,KAAK,GAAG,CAAC,GAAG;IACrB;IAEA,0BAA0B;IAC1B,eAAe;QACb,MAAM,eAAe,IAAI;QACzB,IAAI;YACF,MAAM,cAAc,MAAM,KAAK,WAAW;YAC1C,MAAM,cAAc,MAAM,aAAa,eAAe,CAAC;YACvD,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,YAAY,QAAQ;YAC5D,QAAQ,GAAG,CAAC,2BAA2B;YACvC,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,IAAI,CAAC,kCAAkC;YAC/C,OAAO;QACT,SAAU;YACR,aAAa,KAAK,GAAG,KAAK,CAAC,QAAQ,IAAI;QACzC;IACF;IAEA,+BAA+B;IAC/B,eAAe;QACb,OAAO,IAAI,QAAQ,CAAC;YAClB,MAAM,QAAQ,IAAI;YAClB,MAAM,YAAY,IAAI,eAAe,CAAC;YAEtC,MAAM,YAAY,WAAW;gBAC3B,IAAI,eAAe,CAAC;gBACpB,QAAQ;YACV,GAAG;YAEH,MAAM,gBAAgB,CAAC,kBAAkB;gBACvC,aAAa;gBACb,IAAI,eAAe,CAAC;gBACpB,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,MAAM,QAAQ;gBACtD,QAAQ,GAAG,CAAC,2BAA2B;gBACvC,QAAQ;YACV;YAEA,MAAM,gBAAgB,CAAC,SAAS;gBAC9B,aAAa;gBACb,IAAI,eAAe,CAAC;gBACpB,QAAQ;YACV;YAEA,MAAM,GAAG,GAAG;QACd;IACF;IAEA,4BAA4B;IAC5B,eAAe;QACb,OAAO,IAAI,QAAQ,CAAC;YAClB,MAAM,cAAc,IAAI;YACxB,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,QAAQ,IAAI,MAAM;YAExB,MAAM,YAAY,WAAW;gBAC3B,IAAI,eAAe,CAAC;gBACpB,QAAQ;YACV,GAAG;YAEH,YAAY,gBAAgB,CAAC,cAAc;gBACzC,IAAI;oBACF,MAAM,eAAe,YAAY,eAAe,CAAC,KAAK,IAAI;oBAC1D,MAAM,cAAc,MAAM,KAAK,WAAW;oBAE1C,aAAa,gBAAgB,CAAC,aAAa;wBACzC,aAAa;wBACb,IAAI,eAAe,CAAC;wBACpB,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,YAAY,QAAQ;wBAC5D,QAAQ,GAAG,CAAC,yBAAyB;wBACrC,QAAQ;oBACV;oBAEA,aAAa,YAAY,CAAC;gBAC5B,EAAE,OAAO,OAAO;oBACd,QAAQ,IAAI,CAAC,gCAAgC;oBAC7C,aAAa;oBACb,IAAI,eAAe,CAAC;oBACpB,QAAQ;gBACV;YACF;QACF;IACF;IAEA,IAAI;QACF,8BAA8B;QAC9B,MAAM,CAAC,kBAAkB,sBAAsB,oBAAoB,GACjE,MAAM,QAAQ,GAAG,CAAC;YAChB;YACA;YACA;SACD;QAEH,QAAQ,GAAG,CAAC,qBAAqB;YAC/B,UAAU;YACV,cAAc;YACd,aAAa;YACb,UAAU;QACZ;QAEA,iCAAiC;QACjC,MAAM,YAAY;YAAC;YAAkB;YAAsB;SAAoB,CAC5E,MAAM,CAAC,CAAA,IAAK,OAAO,QAAQ,CAAC,MAAM,IAAI;QAEzC,QAAQ,GAAG,CAAC,oBAAoB;QAEhC,IAAI,UAAU,MAAM,KAAK,GAAG;YAC1B,QAAQ,IAAI,CAAC;YACb,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC;QAChC;QAEA,0BAA0B;QAC1B,UAAU,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI;QAC7B,MAAM,iBAAiB,SAAS,CAAC,KAAK,KAAK,CAAC,UAAU,MAAM,GAAG,GAAG;QAClE,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC;QAE7C,QAAQ,GAAG,CAAC,mBAAmB;YAC7B,QAAQ;YACR,OAAO;YACP;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,oBAAoB;QACjE,QAAQ,GAAG,CAAC,wCAAwC;QACpD,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/hooks/useRecording.ts"],"sourcesContent":["import { useState, useRef, useCallback, useEffect } from 'react';\nimport { toast } from '@/components/ui/toast';\nimport { getAudioDuration } from '@/lib/audioDuration';\n\ninterface RecordingState {\n  isRecording: boolean;\n  audioBlob: Blob | null;\n  duration: number;\n  error: string | null;\n  isProcessing: boolean;\n  uploadProgress: number;\n  transcriptionStatus: 'idle' | 'uploading' | 'processing' | 'completed' | 'error';\n}\n\nexport function useRecording() {\n  const [state, setState] = useState<RecordingState>({\n    isRecording: false,\n    audioBlob: null,\n    duration: 0,\n    error: null,\n    isProcessing: false,\n    uploadProgress: 0,\n    transcriptionStatus: 'idle'\n  });\n  \n  const recordingStartTime = useRef<number | null>(null);\n  const durationRef = useRef<number>(0);\n  \n  const mediaRecorder = useRef<MediaRecorder | null>(null);\n  const audioChunks = useRef<BlobPart[]>([]);\n  const audioStream = useRef<MediaStream | null>(null);\n  const audioContext = useRef<AudioContext | null>(null);\n  const audioAnalyzer = useRef<AnalyserNode | null>(null);\n  const durationInterval = useRef<number>();\n  const audioLevelCheckInterval = useRef<number>();\n\n  const startRecording = useCallback(async (stream: MediaStream) => {\n    try {\n      console.log('Starting recording setup...');\n      \n      // Validate stream\n      if (!stream || stream.getAudioTracks().length === 0) {\n        throw new Error('Ingen lydinngang tilgjengelig');\n      }\n\n      const audioTrack = stream.getAudioTracks()[0];\n      if (!audioTrack.enabled || audioTrack.muted) {\n        throw new Error('Lydinngang er deaktivert eller dempet');\n      }\n\n      // Reset state\n      setState(prev => ({ \n        ...prev, \n        audioBlob: null,\n        duration: 0,\n        error: null,\n        isProcessing: false,\n        uploadProgress: 0,\n        transcriptionStatus: 'idle'\n      }));\n\n      // Verify audio track\n      if (!stream || stream.getAudioTracks().length === 0) {\n        throw new Error('Ingen lydinngang tilgjengelig');\n      }\n      \n      const track = stream.getAudioTracks()[0];\n      if (!track.enabled || track.muted) {\n        throw new Error('Lydinngang er deaktivert eller dempet');\n      }\n\n      // Get supported mime type\n      const mimeType = MediaRecorder.isTypeSupported('audio/webm;codecs=opus')\n        ? 'audio/webm;codecs=opus'\n        : MediaRecorder.isTypeSupported('audio/webm')\n          ? 'audio/webm'\n          : null;\n          \n      if (!mimeType) {\n        throw new Error('Nettleseren støtter ikke lydopptak. Prøv en annen nettleser.');\n      }\n\n      console.log('Using MIME type:', mimeType);\n\n      // Create and configure MediaRecorder\n      let recorder: MediaRecorder;\n      try {\n        recorder = new MediaRecorder(stream, {\n          mimeType,\n          fallbackDuration: Math.max(1, durationRef.current || 1),\n          fallbackDuration: Math.max(1, Math.round(durationRef.current || 1)),\n          timeout: 10000\n        });\n      } catch (error) {\n        console.error('MediaRecorder creation failed:', error);\n        throw new Error('Kunne ikke starte lydopptak. Sjekk nettleserinnstillingene.');\n      }\n      \n      mediaRecorder.current = recorder;\n      audioChunks.current = [];\n\n      // Track if we're receiving data\n      let hasReceivedData = false;\n      \n      mediaRecorder.current.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          hasReceivedData = true;\n          console.log('Received audio chunk:', event.data.size, 'bytes');\n          audioChunks.current.push(event.data);\n        }\n      };\n\n      mediaRecorder.current.onstop = async () => {\n        console.log('Recording stopped, processing chunks...');\n        \n        setState(prev => ({ ...prev, isProcessing: true }));\n        \n        if (!hasReceivedData || audioChunks.current.length === 0) {\n          console.error('No audio data recorded');\n          setState(prev => ({ \n            ...prev, \n            error: 'Ingen lyd ble registrert',\n            isProcessing: false \n          }));\n          return;\n        }\n\n        const audioBlob = new Blob(audioChunks.current, { type: mimeType });\n        console.log('Audio blob created:', audioBlob.size, 'bytes');\n        \n        if (audioBlob.size < 1024) { // Less than 1KB is probably invalid\n          setState(prev => ({ \n            ...prev, \n            error: 'Opptaket er for kort',\n            isProcessing: false \n          }));\n          return;\n        }\n\n        // Get audio duration from blob\n        const audioDuration = await getAudioDuration(audioBlob);\n        console.log('Audio duration:', audioDuration, 'seconds');\n        \n        // Calculate final duration\n        const finalDuration = Math.max(1, Math.round(audioDuration));\n        console.log('Final duration:', finalDuration);\n\n        setState(prev => ({ \n          ...prev, \n          audioBlob,\n          duration: finalDuration,\n          isProcessing: false \n        }));\n      };\n\n      // Start recording with smaller chunks for better responsiveness\n      mediaRecorder.current.start(1000);\n      console.log('MediaRecorder started');\n      \n      // Reset duration tracking\n      recordingStartTime.current = Date.now() / 1000; // Convert to seconds\n      durationRef.current = 1; // Start with minimum valid duration\n      \n      setState(prev => ({ ...prev, isRecording: true, error: null }));\n      \n      // Update duration every second based on actual elapsed time\n      durationInterval.current = window.setInterval(() => {\n        const now = Date.now() / 1000;\n        const elapsed = Math.floor(now - (recordingStartTime.current || now));\n        durationRef.current = Math.max(1, elapsed);\n        setState(prev => ({ ...prev, duration: durationRef.current }));\n      }, 1000);\n\n    } catch (error) {\n      console.error('Recording error:', error);\n      setState(prev => ({ \n        ...prev, \n        error: error instanceof Error ? error.message : 'Kunne ikke starte opptak. Sjekk mikrofontilgang.',\n        isProcessing: false \n      }));\n    }\n  }, []);\n\n  const stopRecording = useCallback(() => {\n    console.log('Stopping recording...');\n    try {\n      if (!mediaRecorder.current || mediaRecorder.current.state === 'inactive') {\n        console.log('MediaRecorder already stopped');\n        return;\n      }\n\n      // Calculate final duration\n      const finalDuration = Math.max(1, durationRef.current);\n      console.log('Final duration:', finalDuration);\n\n      if (mediaRecorder.current.state !== 'inactive') {\n        mediaRecorder.current.stop();\n        console.log('MediaRecorder stopped');\n      }\n\n      // Update state with final duration\n      setState(prev => ({ \n        ...prev, \n        isRecording: false,\n        duration: finalDuration\n      }));\n\n      // Then stop all tracks in the stream\n      if (audioStream.current) {\n        audioStream.current.getTracks().forEach(track => track.stop());\n        audioStream.current = null;\n        console.log('Audio tracks stopped');\n      }\n\n      // Clean up audio context and analyzer\n      if (audioAnalyzer.current) {\n        audioAnalyzer.current.disconnect();\n        audioAnalyzer.current = null;\n      }\n      \n      if (audioContext.current && audioContext.current.state !== 'closed') {\n        audioContext.current.close().catch(console.warn);\n        audioContext.current = null;\n      }\n      \n      // Clear intervals\n      if (durationInterval.current) {\n        clearInterval(durationInterval.current);\n        durationInterval.current = undefined;\n      }\n      \n      if (audioLevelCheckInterval.current) {\n        clearInterval(audioLevelCheckInterval.current);\n        audioLevelCheckInterval.current = undefined;\n      }\n      \n      recordingStartTime.current = null;\n    } catch (error) {\n      console.error('Error stopping recording:', error);\n      // Try to clean up even if there's an error\n      try {\n        if (audioStream.current) {\n          audioStream.current.getTracks().forEach(track => track.stop());\n          audioStream.current = null;\n        }\n        if (audioContext.current && audioContext.current.state !== 'closed') {\n          audioContext.current.close().catch(console.warn);\n          audioContext.current = null;\n        }\n      } catch (cleanupError) {\n        console.warn('Error during cleanup:', cleanupError);\n      }\n      \n      setState(prev => ({ \n        ...prev, \n        error: error instanceof Error ? error.message : 'Kunne ikke stoppe opptaket',\n        isRecording: false \n      }));\n      throw error; // Re-throw to allow parent components to handle the error\n    }\n  }, []);\n\n  const resetRecording = useCallback(() => {\n    try {\n      // Clear interval\n      if (durationInterval.current) {\n        clearInterval(durationInterval.current);\n        durationInterval.current = undefined;\n        console.debug('Duration interval cleared');\n      }\n\n      // Stop MediaRecorder\n      if (mediaRecorder.current && mediaRecorder.current.state !== 'inactive') {\n        mediaRecorder.current.stop();\n        console.debug('MediaRecorder stopped');\n      }\n      mediaRecorder.current = null;\n\n      // Stop audio stream\n      if (audioStream.current) {\n        audioStream.current.getTracks().forEach(track => track.stop());\n        audioStream.current = null;\n        console.debug('Audio tracks stopped');\n      }\n\n      // Reset state\n      setState({\n        isRecording: false,\n        audioBlob: null,\n        duration: 1,\n        error: null,\n        isProcessing: false,\n        uploadProgress: 0,\n        transcriptionStatus: 'idle'\n      });\n      \n      // Clear audio chunks\n      audioChunks.current = [];\n      recordingStartTime.current = null;\n      console.debug('Recording reset completed');\n    } catch (error) {\n      console.error('Error resetting recording:', error);\n      toast.error('Kunne ikke tilbakestille opptaket');\n    }\n  }, []);\n\n  const cleanup = useCallback(() => {\n    try {\n      // Stop MediaRecorder if active\n      if (mediaRecorder.current) {\n        if (mediaRecorder.current.state !== 'inactive') {\n          mediaRecorder.current.stop();\n        }\n        mediaRecorder.current = null;\n      }\n\n      // Stop audio stream\n      if (audioStream.current) {\n        audioStream.current.getTracks().forEach(track => track.stop());\n        audioStream.current = null;\n      }\n\n      // Clean up audio context\n      if (audioContext.current) {\n        if (audioContext.current.state !== 'closed') {\n          audioContext.current.close().catch(console.warn);\n        }\n        audioContext.current = null;\n      }\n\n      // Clear intervals\n      if (durationInterval.current) {\n        clearInterval(durationInterval.current);\n        durationInterval.current = undefined;\n      }\n      \n      if (audioLevelCheckInterval.current) {\n        clearInterval(audioLevelCheckInterval.current);\n        audioLevelCheckInterval.current = undefined;\n      }\n\n      // Reset state\n      setState({\n        isRecording: false,\n        audioBlob: null,\n        duration: 1,\n        error: null,\n        isProcessing: false,\n        uploadProgress: 0,\n        transcriptionStatus: 'idle'\n      });\n\n      // Clear audio chunks\n      audioChunks.current = [];\n      recordingStartTime.current = null;\n      console.debug('Recording cleanup completed');\n    } catch (error) {\n      console.error('Error during cleanup:', error);\n    }\n  }, []);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      cleanup();\n    };\n  }, [cleanup]);\n\n  const checkAudioLevel = async (stream: MediaStream) => {\n    try {\n      // Validate stream\n      const track = stream.getAudioTracks()[0];\n      if (!track || !track.enabled) {\n        return true; // Consider disabled track as muted\n      }\n\n      if (!audioContextRef.current || audioContextRef.current.state === 'closed') {\n        audioContextRef.current = new AudioContext();\n      }\n      \n      const source = audioContextRef.current.createMediaStreamSource(stream);\n      const analyzer = audioContextRef.current.createAnalyser();\n      analyzer.fftSize = 1024; // Redusert for bedre ytelse\n      analyzer.smoothingTimeConstant = 0.3; // Raskere respons\n      analyzer.minDecibels = -70; // Mer følsom for lave lyder\n      analyzer.maxDecibels = -30; // Unngå overstyring\n      source.connect(analyzer);\n      \n      const dataArray = new Uint8Array(analyzer.frequencyBinCount);\n      \n      return new Promise<boolean>((resolve) => {\n        const sampleBuffer: number[] = [];\n        const bufferSize = 10;\n        let totalSamples = 0;\n        \n        const checkLevel = () => {\n          if (!isMounted.current) {\n            resolve(false);\n            return;\n          }\n          \n          analyzer.getByteFrequencyData(dataArray);\n          // Beregn RMS-verdi for mer nøyaktig lydnivå\n          const rms = Math.sqrt(\n            dataArray.reduce((acc, val) => acc + (val * val), 0) / dataArray.length\n          );\n          \n          sampleBuffer.push(rms);\n          if (sampleBuffer.length > bufferSize) {\n            sampleBuffer.shift();\n          }\n          \n          totalSamples++;\n          \n          // Vent på nok samples før vi tar en beslutning\n          if (totalSamples >= 15) {\n            clearInterval(audioLevelCheckInterval.current);\n            \n            // Beregn gjennomsnittlig RMS\n            const avgRms = sampleBuffer.reduce((a, b) => a + b, 0) / sampleBuffer.length;\n            \n            // Bruk en adaptiv terskel\n            const threshold = 2.0; // Justert terskel basert på testing\n            const isMuted = avgRms < threshold;\n            \n            console.log('Audio level check:', {\n              avgRms,\n              threshold,\n              isMuted,\n              samples: totalSamples\n            });\n            \n            resolve(isMuted);\n          }\n        };\n        \n        // Kjør sjekk oftere for raskere respons\n        audioLevelCheckInterval.current = window.setInterval(checkLevel, 33);\n      });\n    } catch (error) {\n      console.error('Error checking audio level:', error);\n      return false;\n    }\n  };\n\n  const handleUpload = async (\n    title: string,\n    folderId: string | null = null,\n    participants: Array<{ name: string; email?: string }> = [],\n    onProgress?: (progress: number) => void\n  ) => {\n    if (!state.audioBlob || state.duration < 1) {\n      toast.error('Ugyldig opptak. Sjekk at opptaket er fullført.');\n      return;\n    }\n\n    // Get actual duration from audio blob\n    let audioDuration = 0;\n    try {\n      audioDuration = await getAudioDuration(state.audioBlob);\n      console.log('Got audio duration:', audioDuration);\n      \n      // Validate duration\n      if (!Number.isFinite(audioDuration) || audioDuration <= 0) {\n        console.warn('Invalid duration, using tracked duration');\n        audioDuration = Math.max(1, Math.round(state.duration));\n      }\n    } catch (error) {\n      console.warn('Could not get audio duration:', error);\n      // Fall back to tracked duration\n      audioDuration = state.duration;\n    }\n    try {\n      setState(prev => ({ \n        ...prev, \n        transcriptionStatus: 'uploading'\n      }));\n\n      // Create File object from Blob\n      const file = new File([state.audioBlob], `${title}.webm`, {\n        type: state.audioBlob.type\n      });\n      \n      console.log('Uploading file:', {\n        name: file.name,\n        type: file.type,\n        duration: audioDuration\n      });\n\n      // Upload recording\n      const recording = await uploadRecording(\n        file,\n        title,\n        folderId,\n        participants,\n        Math.max(1, state.duration),\n        onProgress\n      );\n\n      setState(prev => ({ \n        ...prev, \n        transcriptionStatus: 'processing'\n      }));\n\n      return recording;\n    } catch (error) {\n      console.error('Upload error:', error);\n      toast.error(error instanceof Error ? error.message : 'Kunne ikke laste opp opptaket');\n      setState(prev => ({ \n        ...prev, \n        transcriptionStatus: 'error',\n        error: error instanceof Error ? error.message : 'Kunne ikke laste opp opptaket'\n      }));\n      throw error;\n    }\n  };\n\n  return {\n    ...state,\n    startRecording,\n    stopRecording,\n    resetRecording,\n    handleUpload\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 712, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/contexts/FolderContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\n\nexport interface Folder {\n  id: string;\n  name: string;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface FolderContextType {\n  folders: Folder[];\n  isLoading: boolean;\n  error: string | null;\n  addFolder: (name: string) => Promise<void>;\n  removeFolder: (id: string) => Promise<void>;\n  updateFolder: (id: string, name: string) => Promise<void>;\n}\n\nconst FolderContext = createContext<FolderContextType | null>(null);\n\nexport function FolderProvider({ children }: { children: React.ReactNode }) {\n  const { user } = useAuth();\n  const [folders, setFolders] = useState<Folder[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (user) {\n      fetchFolders();\n    } else {\n      setFolders([]);\n      setIsLoading(false);\n    }\n  }, [user]);\n\n  const fetchFolders = async () => {\n    if (!user) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      // TODO: Implement your folder fetching logic here\n      setFolders([]);\n    } catch (err) {\n      console.error('Error fetching folders:', err);\n      setError('Kunne ikke hente mapper');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const addFolder = async (name: string) => {\n    if (!user) throw new Error('Bruker ikke logget inn');\n    \n    try {\n      setError(null);\n      // TODO: Implement your folder creation logic here\n      setFolders(prev => [...prev]);\n    } catch (err) {\n      console.error('Error adding folder:', err);\n      throw err;\n    }\n  };\n\n  const removeFolder = async (id: string) => {\n    if (!user) throw new Error('Bruker ikke logget inn');\n    \n    try {\n      setError(null);\n      // TODO: Implement your folder deletion logic here\n      setFolders(prev => prev.filter(folder => folder.id !== id));\n    } catch (err) {\n      console.error('Error removing folder:', err);\n      throw err;\n    }\n  };\n\n  const updateFolder = async (id: string, name: string) => {\n    if (!user) throw new Error('Bruker ikke logget inn');\n    \n    try {\n      setError(null);\n      // TODO: Implement your folder update logic here\n      setFolders(prev => prev.map(folder => \n        folder.id === id ? { ...folder, name } : folder\n      ));\n    } catch (err) {\n      console.error('Error updating folder:', err);\n      throw err;\n    }\n  };\n\n  return (\n    <FolderContext.Provider \n      value={{ \n        folders, \n        isLoading, \n        error, \n        addFolder, \n        removeFolder, \n        updateFolder \n      }}\n    >\n      {children}\n    </FolderContext.Provider>\n  );\n}\n\nexport function useFolders() {\n  const context = useContext(FolderContext);\n  if (!context) {\n    throw new Error('useFolders must be used within a FolderProvider');\n  }\n  return context;\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAqBA,MAAM,8BAAgB,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD,EAA4B;AAEvD,SAAS,eAAe,EAAE,QAAQ,EAAiC;IACxE,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,MAAM;YACR;QACF,OAAO;YACL,WAAW,EAAE;YACb,aAAa;QACf;IACF,GAAG;QAAC;KAAK;IAET,MAAM,eAAe;QACnB,IAAI,CAAC,MAAM;QAEX,IAAI;YACF,aAAa;YACb,SAAS;YACT,kDAAkD;YAClD,WAAW,EAAE;QACf,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,SAAS;QACX,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,YAAY,OAAO;QACvB,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAE3B,IAAI;YACF,SAAS;YACT,kDAAkD;YAClD,WAAW,CAAA,OAAQ;uBAAI;iBAAK;QAC9B,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM;QACR;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAE3B,IAAI;YACF,SAAS;YACT,kDAAkD;YAClD,WAAW,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,SAAU,OAAO,EAAE,KAAK;QACzD,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACR;IACF;IAEA,MAAM,eAAe,OAAO,IAAY;QACtC,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAE3B,IAAI;YACF,SAAS;YACT,gDAAgD;YAChD,WAAW,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,SAC1B,OAAO,EAAE,KAAK,KAAK;wBAAE,GAAG,MAAM;wBAAE;oBAAK,IAAI;QAE7C,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,MAAM;QACR;IACF;IAEA,qBACE,8OAAC,cAAc,QAAQ;QACrB,OAAO;YACL;YACA;YACA;YACA;YACA;YACA;QACF;kBAEC;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 820, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/FolderSelect.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { Folder, ChevronDown, X } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useFolders } from '@/contexts/FolderContext';\n\ninterface FolderSelectProps {\n  currentFolderId: string | null;\n  onFolderChange: (folderId: string | null) => Promise<void>;\n  disabled?: boolean;\n}\n\nexport default function FolderSelect({ \n  currentFolderId, \n  onFolderChange,\n  disabled = false \n}: FolderSelectProps) {\n  const { folders } = useFolders();\n  const [isOpen, setIsOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const currentFolder = folders.find(f => f.id === currentFolderId);\n\n  const handleFolderChange = async (folderId: string | null) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      await onFolderChange(folderId);\n      setIsOpen(false);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Kunne ikke endre mappe');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      <label className=\"block text-sm font-medium text-gray-700\">\n        Mappe\n      </label>\n      \n      <div className=\"relative\">\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          disabled={disabled || isLoading}\n          className={cn(\n            \"w-full flex items-center justify-between px-4 py-2 rounded-lg border text-left transition-colors\",\n            currentFolder \n              ? \"bg-violet-50 border-violet-200\" \n              : \"bg-white border-gray-300\",\n            (disabled || isLoading) \n              ? \"opacity-50 cursor-not-allowed\" \n              : \"hover:bg-gray-50\"\n          )}\n        >\n          <div className=\"flex items-center min-w-0\">\n            <Folder className={cn(\n              \"h-4 w-4 flex-shrink-0 mr-2\",\n              currentFolder ? \"text-violet-600\" : \"text-gray-400\"\n            )} />\n            <span className=\"truncate\">\n              {currentFolder?.name || 'Ingen mappe valgt'}\n            </span>\n          </div>\n          <ChevronDown className={cn(\n            \"h-4 w-4 text-gray-400 transition-transform\",\n            isOpen && \"transform rotate-180\"\n          )} />\n        </button>\n\n        {isOpen && (\n          <div className=\"absolute z-10 w-full mt-1 bg-white rounded-lg border border-gray-200 shadow-lg max-h-48 overflow-y-auto\">\n            <div className=\"p-1\">\n              {/* Ingen mappe-alternativ */}\n              <button\n                onClick={() => handleFolderChange(null)}\n                className={cn(\n                  \"w-full flex items-center px-3 py-2 rounded-md text-left text-sm transition-colors\",\n                  !currentFolderId ? \"bg-violet-50 text-violet-900\" : \"hover:bg-gray-50\"\n                )}\n              >\n                <X className=\"h-4 w-4 mr-2 text-gray-400\" />\n                Ingen mappe\n              </button>\n\n              {/* Liste over mapper */}\n              {folders.map(folder => (\n                <button\n                  key={folder.id}\n                  onClick={() => handleFolderChange(folder.id)}\n                  className={cn(\n                    \"w-full flex items-center px-3 py-2 rounded-md text-left text-sm transition-colors\",\n                    currentFolderId === folder.id \n                      ? \"bg-violet-50 text-violet-900\" \n                      : \"hover:bg-gray-50\"\n                  )}\n                >\n                  <Folder className=\"h-4 w-4 mr-2 text-gray-400\" />\n                  {folder.name}\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {error && (\n        <p className=\"text-sm text-red-600\">{error}</p>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAQe,SAAS,aAAa,EACnC,eAAe,EACf,cAAc,EACd,WAAW,KAAK,EACE;IAClB,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,iIAAA,CAAA,aAAU,AAAD;IAC7B,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAEjD,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM,eAAe;YACrB,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;0BAA0C;;;;;;0BAI3D,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,UAAU,CAAC;wBAC1B,UAAU,YAAY;wBACtB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oGACA,gBACI,mCACA,4BACJ,AAAC,YAAY,YACT,kCACA;;0CAGN,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,sMAAA,CAAA,SAAM;wCAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAClB,8BACA,gBAAgB,oBAAoB;;;;;;kDAEtC,8OAAC;wCAAK,WAAU;kDACb,eAAe,QAAQ;;;;;;;;;;;;0CAG5B,8OAAC,oNAAA,CAAA,cAAW;gCAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACvB,8CACA,UAAU;;;;;;;;;;;;oBAIb,wBACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC;oCACC,SAAS,IAAM,mBAAmB;oCAClC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qFACA,CAAC,kBAAkB,iCAAiC;;sDAGtD,8OAAC,4LAAA,CAAA,IAAC;4CAAC,WAAU;;;;;;wCAA+B;;;;;;;gCAK7C,QAAQ,GAAG,CAAC,CAAA,uBACX,8OAAC;wCAEC,SAAS,IAAM,mBAAmB,OAAO,EAAE;wCAC3C,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qFACA,oBAAoB,OAAO,EAAE,GACzB,iCACA;;0DAGN,8OAAC,sMAAA,CAAA,SAAM;gDAAC,WAAU;;;;;;4CACjB,OAAO,IAAI;;uCAVP,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;YAkBzB,uBACC,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAI7C","debugId":null}},
    {"offset": {"line": 988, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/services/recordingService.ts"],"sourcesContent":["\n\nimport { getAudioDuration } from '@/lib/audioDuration';\n\nexport interface Recording {\n  id: string;\n  title: string;\n  duration: number;\n  status: string;\n  transcription_id?: string;\n}\n\nexport async function uploadRecording(\n  file: File,\n  title: string,\n  folderId: string | null = null,\n  participants: Array<{ name: string; email?: string }> = [],\n  trackedDuration: number = 1,\n  onProgress?: (progress: number) => void\n): Promise<Recording> {\n  try {\n    if (!file) {\n      throw new Error('Ingen lydfil tilgjengelig');\n    }\n\n    // Ensure we have a valid tracked duration\n    const initialDuration = Math.max(1, Math.round(trackedDuration));\n\n    console.log('Starting recording upload:', {\n      title,\n      fileSize: file?.size,\n      fileType: file?.type,\n      name: file?.name,\n      initialDuration\n    });\n\n    // Get accurate duration from file\n    const duration = await getAudioDuration(file, {\n      fallbackDuration: initialDuration,\n      timeout: 5000\n    });\n    \n    // Calculate final duration\n    const finalDuration = Math.max(1, Math.round(duration));\n    console.log('Final duration:', finalDuration);\n\n    // Validate file type\n    const allowedTypes = transcriptionConfig.audio.allowedTypes;\n    if (!file || !allowedTypes.includes(file.type)) {\n      throw new Error(`Filformatet støttes ikke. Støttede formater: ${allowedTypes.join(', ')}`);\n    }\n\n    // Get user session\n    const { data: { user }, error: userError } = await supabase.auth.getUser();\n    if (userError || !user) {\n      throw new Error('Du må være logget inn for å laste opp opptak');\n    }\n\n    // Create recording record first\n    const { data: recording, error: recordingError } = await supabase\n      .from('recordings')\n      .insert({\n        title: title.trim(),\n        folder_id: folderId,\n        status: 'processing',\n        user_id: user.id,\n        duration: finalDuration,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (recordingError) {\n      console.error('Database error:', recordingError);\n      throw new Error('Kunne ikke opprette opptak i databasen');\n    }\n\n    console.log('Created recording record:', recording);\n\n    // Upload file to Supabase Storage with retry logic\n    const maxRetries = 3;\n    let uploadError: Error | null = null;\n    let lastAttemptError: Error | null = null;\n    \n    for (let attempt = 0; attempt < maxRetries; attempt++) {\n      try {\n        // Keep original file extension\n        const extension = file.name.split('.').pop() || 'webm';\n        const filePath = `${user.id}/${recording.id}.${extension}`;\n        console.log('Uploading file to path:', filePath);\n\n        const { error } = await supabase.storage\n          .from('recordings')\n          .upload(filePath, file, {\n            cacheControl: '3600',\n            upsert: false,\n            contentType: file.type,\n            onUploadProgress: ({ progress }) => {\n              onProgress?.(Math.round(progress * 100));\n            }\n          });\n\n        if (!error) {\n          uploadError = null;\n          break;\n        }\n        \n        uploadError = error;\n        await new Promise(resolve => setTimeout(resolve, 1000 * (attempt + 1)));\n        lastAttemptError = error;\n      } catch (error) {\n        uploadError = error as Error;\n        lastAttemptError = error as Error;\n        await new Promise(resolve => setTimeout(resolve, 1000 * (attempt + 1)));\n      }\n    }\n\n    if (uploadError) {\n      console.error('Upload failed after retries:', uploadError);\n      throw new Error(lastAttemptError?.message || 'Kunne ikke laste opp filen etter flere forsøk');\n    }\n\n    // Get public URL\n    const { data: { publicUrl }, error: urlError } = supabase.storage\n      .from('recordings')\n      .getPublicUrl(`${user.id}/${recording.id}.webm`);\n\n    if (urlError || !publicUrl) {\n      throw new Error('Could not get file URL');\n    }\n\n    // Update recording with file URL and metadata\n    const { error: updateError } = await supabase\n      .from('recordings')\n      .update({ \n        file_url: publicUrl,\n        file_size: file.size,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', recording.id);\n\n    if (updateError) {\n      console.error('Update error:', updateError);\n      throw new Error('Could not update recording');\n    }\n    console.log('Updated recording with file URL:', publicUrl);\n\n    // Add participants if any\n    if (participants.length > 0) {\n      const { error: participantsError } = await supabase\n        .from('recording_participants')\n        .insert(\n          participants.map(p => ({\n            recording_id: recording.id,\n            name: p.name.trim(),\n            email: p.email?.trim(),\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          }))\n        );\n\n      if (participantsError) {\n        console.error('Error adding participants:', participantsError);\n      }\n    }\n\n    // Start transcription process\n    try {\n      const response = await fetch(`${import.meta.env.VITE_SUPABASE_URL}/functions/v1/start-transcription`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${(await supabase.auth.getSession()).data.session?.access_token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          recordingId: recording.id\n        })\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        let errorData;\n        try {\n          errorData = JSON.parse(errorText);\n        } catch {\n          errorData = { error: errorText };\n        }\n        throw new Error(errorData.error || 'Kunne ikke starte transkribering');\n      }\n\n      const responseData = await response.json();\n      \n      if (!responseData.jobId || !responseData.apiRecordingId) {\n        throw new Error('Ingen transkripsjons-ID mottatt');\n      }\n\n      console.log('Transcription started successfully');\n\n      // Update recording with transcription info\n      const { error: updateError } = await supabase\n        .from('recordings')\n        .update({ \n          status: 'processing',\n          updated_at: new Date().toISOString()\n        })\n        .eq('id', recording.id);\n\n      if (updateError) {\n        throw new Error('Kunne ikke oppdatere opptaksstatus');\n      }\n\n      // Create transcription record\n      const { error: transcriptionError } = await supabase\n        .from('transcriptions')\n        .upsert({\n          recording_id: recording.id,\n          user_id: user.id,\n          status: 'processing',\n          api_job_id: responseData.jobId,\n          api_recording_id: responseData.apiRecordingId,\n          content: {\n            text: '',\n            segments: [],\n            language: 'nb',\n            duration: finalDuration\n          },\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        }, {\n          onConflict: 'recording_id'\n        });\n\n      if (transcriptionError) {\n        throw new Error('Kunne ikke opprette transkripsjonsoppføring');\n      }\n\n      return {\n        ...recording,\n        api_job_id: responseData.jobId,\n        api_recording_id: responseData.apiRecordingId\n      };\n\n    } catch (error) {\n      console.error('Error starting transcription:', error);\n      await updateRecordingStatus(recording.id, 'error');\n      throw new Error(error instanceof Error ? error.message : 'Kunne ikke starte transkribering');\n    }\n\n    return recording;\n  } catch (error) {\n    console.error('Upload error:', error);\n    throw error instanceof Error ? error : new Error('Unknown error during upload');\n  }\n}\n\nexport async function updateRecordingStatus(\n  recordingId: string, \n  status: 'processing' | 'completed' | 'error',\n  metadata?: {\n    duration?: number;\n    error?: string;\n  }\n) {\n  try {\n    const updates: Record<string, any> = {\n      status,\n      updated_at: new Date().toISOString()\n    };\n\n    if (metadata?.duration) {\n      updates.duration = metadata.duration;\n    }\n\n    if (metadata?.error) {\n      updates.error_message = metadata.error;\n    }\n\n    const { error } = await supabase\n      .from('recordings')\n      .update(updates)\n      .eq('id', recordingId);\n\n    if (error) {\n      console.error('Status update error:', error);\n      throw new Error(error instanceof Error ? error.message : 'Kunne ikke laste opp opptaket');\n    }\n  } catch (error) {\n    console.error('Error updating recording status:', error);\n    if (error instanceof Error) {\n      if (error.message.includes('duration')) {\n        throw new Error('Kunne ikke bestemme opptakets varighet. Prøv igjen.');\n      }\n      throw error;\n    }\n    throw new Error('En ukjent feil oppstod under opplasting');\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1218, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/AudioVisualizer.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\ninterface AudioVisualizerProps {\n  stream: MediaStream | null;\n}\n\nexport default function AudioVisualizer({ stream }: AudioVisualizerProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationRef = useRef<number>();\n  const analyzerRef = useRef<AnalyserNode | null>(null);\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const sourceRef = useRef<MediaStreamAudioSourceNode | null>(null);\n  const isMounted = useRef(true);\n\n  useEffect(() => {\n    isMounted.current = true;\n    \n    if (!stream || !canvasRef.current) return;\n\n    const initializeAudio = async () => {\n      try {\n        // Create new AudioContext only if needed and not already closed\n        if (!audioContextRef.current || audioContextRef.current.state === 'closed') {\n          audioContextRef.current = new AudioContext();\n        }\n        const audioContext = audioContextRef.current;\n\n        // If context is suspended, resume it\n        if (audioContext.state === 'suspended') {\n          await audioContext.resume();\n        }\n\n        // Create and store source node\n        sourceRef.current = audioContext.createMediaStreamSource(stream);\n        const analyzer = audioContext.createAnalyser();\n        analyzerRef.current = analyzer;\n        \n        // Optimize analyzer settings\n        analyzer.fftSize = 256; // Reduced for better performance\n        analyzer.smoothingTimeConstant = 0.6;\n        analyzer.minDecibels = -90;\n        analyzer.maxDecibels = -10;\n        \n        sourceRef.current.connect(analyzer);\n\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d')!;\n        const bufferLength = analyzer.frequencyBinCount;\n        const dataArray = new Uint8Array(bufferLength);\n\n        // Optimize drawing function\n        const draw = () => {\n          if (!canvas || !ctx || !analyzer || !isMounted.current) return;\n          \n          animationRef.current = requestAnimationFrame(draw);\n\n          // Clear previous frame\n          ctx.clearRect(0, 0, canvas.width, canvas.height);\n          \n          // Get frequency data\n          analyzer.getByteFrequencyData(dataArray);\n\n          const barWidth = 2;\n          const gap = 1;\n          const totalWidth = barWidth + gap;\n          const halfWidth = canvas.width / 2;\n          const barCount = Math.floor(halfWidth / totalWidth);\n\n          // Draw visualization\n          for (let i = 0; i < barCount; i++) {\n            // Calculate average frequency for this bar\n            let sum = 0;\n            const samplesPerBar = Math.floor(bufferLength / barCount);\n            const startIndex = i * samplesPerBar;\n            \n            for (let j = 0; j < samplesPerBar; j++) {\n              sum += dataArray[startIndex + j];\n            }\n            \n            let value = sum / samplesPerBar;\n\n            // Apply noise gate\n            const noiseThreshold = 15;\n            if (value < noiseThreshold) {\n              value = 0;\n            } else {\n              value = ((value - noiseThreshold) / (255 - noiseThreshold)) * 255;\n            }\n\n            // Apply frequency-based boost\n            const positionBoost = 1 + (i / barCount) * 0.3;\n            value = Math.min(255, value * positionBoost * 0.8);\n\n            const percent = value / 255;\n            const height = Math.max((canvas.height * percent) * 0.9, 2);\n\n            // Calculate alpha based on amplitude\n            const alpha = 0.3 + (percent * 0.7);\n            ctx.fillStyle = `rgba(124, 58, 237, ${alpha})`;\n\n            // Draw right bar with rounded corners\n            const x = halfWidth + (i * totalWidth);\n            const y = (canvas.height - height) / 2;\n            ctx.beginPath();\n            ctx.roundRect(x, y, barWidth, height, barWidth / 2);\n            ctx.fill();\n\n            // Draw mirrored left bar\n            const mirrorX = halfWidth - ((i + 1) * totalWidth);\n            ctx.beginPath();\n            ctx.roundRect(mirrorX, y, barWidth, height, barWidth / 2);\n            ctx.fill();\n          }\n        };\n\n        // Start animation\n        draw();\n\n        // Cleanup function\n        return () => {        \n          isMounted.current = false;\n          \n          // Cancel animation frame\n          if (animationRef.current) {\n            cancelAnimationFrame(animationRef.current);\n            animationRef.current = undefined;\n          }\n\n          // Disconnect nodes\n          if (analyzerRef.current) {\n            analyzerRef.current.disconnect();\n            analyzerRef.current = null;\n          }\n\n          if (sourceRef.current) {\n            sourceRef.current.disconnect();\n            sourceRef.current = null;\n          }\n\n          // Suspend AudioContext instead of closing\n          if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n            audioContextRef.current.suspend().catch(console.warn);\n          }\n        };\n      } catch (error) {\n        console.error('Error initializing audio visualizer:', error);\n      }\n    };\n\n    initializeAudio();\n  }, [stream]);\n\n  return (\n    <canvas \n      ref={canvasRef} \n      width={500} \n      height={60} \n      className=\"w-full h-20 rounded-lg bg-gray-50\"\n    />\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1360, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/RecordingModal.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { \n  Mic, \n  X, \n  Activity, \n  Clock, \n  AlertCircle,\n  UserPlus,\n  ChevronDown,\n  Trash2,\n  RefreshCcw,\n  Volume2,\n  VolumeX\n} from 'lucide-react';\nimport { useRecording } from '@/hooks/useRecording';\n\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useFolders } from '@/contexts/FolderContext';\nimport { validateAudioFile } from '@/lib/fileValidation';\nimport FolderSelect from '@/components/FolderSelect';\nimport { uploadRecording } from '@/services/recordingService';\nimport { cn } from '@/lib/utils';\nimport AudioVisualizer from './AudioVisualizer';\nimport { toast } from '@/components/ui/toast';\n\ninterface RecordingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onComplete?: (recordingId: string) => void;\n}\n\ninterface Participant {\n  id: string;\n  name: string;\n  email: string;\n}\n\ntype TranscriptionStatus = 'idle' | 'uploading' | 'processing' | 'completed' | 'error';\n\nconst STATUS_MESSAGES = {\n  idle: 'Klar til opptak',\n  uploading: 'Laster opp opptak...',\n  processing: 'Transkriberer opptak...',\n  completed: 'Transkribering fullført',\n  error: 'Feil under transkribering'\n} as const;\n\nconst STATUS_DESCRIPTIONS = {\n  uploading: 'Opptaket lastes opp til sikker lagring',\n  processing: 'Opptaket blir analysert og transkribert',\n  completed: 'Transkriberingen er klar til bruk',\n  error: 'Det oppstod en feil under transkriberingen. Prøv igjen.'\n} as const;\n\nexport default function RecordingModal({ isOpen, onClose, onComplete }: RecordingModalProps) {\n  const { user } = useAuth();\n  const { folders } = useFolders();\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveError, setSaveError] = useState<string | null>(null);\n  const [recordingTitle, setRecordingTitle] = useState('');\n  const [titleError, setTitleError] = useState<string | null>(null);\n  const [selectedFolder, setSelectedFolder] = useState<string | null>(null);\n  const [participants, setParticipants] = useState<Participant[]>([]);\n  const [newParticipant, setNewParticipant] = useState({ name: '', email: '' });\n  const [participantError, setParticipantError] = useState<string | null>(null);\n  const [audioStream, setAudioStream] = useState<MediaStream | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [currentRecordingId, setCurrentRecordingId] = useState<string | null>(null);\n  const [isMicrophoneMuted, setIsMicrophoneMuted] = useState(false);\n  const [modalStatus, setModalStatus] = useState<TranscriptionStatus>('idle');\n\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const audioLevelCheckInterval = useRef<number>();\n  const isMounted = useRef(true);\n\n  const {\n    isRecording,\n    duration,\n    error: recordingError,\n    audioBlob,\n    isProcessing,\n    startRecording,\n    stopRecording,\n    resetRecording,\n    handleUpload: handleRecordingUpload\n  } = useRecording();\n\n  // Add polling for transcription status\n  useEffect(() => {\n    let timeoutId: number;\n    \n    const checkStatus = async () => {\n      if (!currentRecordingId || modalStatus !== 'processing') return;\n\n      try {\n        const response = await fetch(`${import.meta.env.VITE_SUPABASE_URL}/functions/v1/check-transcription`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${(await supabase.auth.getSession()).data.session?.access_token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ recordingId: currentRecordingId })\n        });\n\n        if (!response.ok) {\n          throw new Error('Kunne ikke sjekke transkriberingsstatus');\n        }\n\n        const data = await response.json();\n\n        if (data.status === 'completed') {\n          setModalStatus('completed');\n          if (onComplete) {\n            onComplete(currentRecordingId);\n          }\n          onClose();\n        } else if (data.status === 'failed') {\n          setModalStatus('error');\n          setSaveError(data.error || 'Transkribering feilet');\n          toast.error(data.error || 'Transkribering feilet');\n        } else {\n          // Continue polling\n          timeoutId = window.setTimeout(checkStatus, 5000);\n        }\n\n        // Update progress\n        setUploadProgress(data.progress || 0);\n\n      } catch (error) {\n        console.error('Error checking transcription status:', error);\n        setModalStatus('error');\n        setSaveError(error instanceof Error ? error.message : 'Kunne ikke sjekke transkriberingsstatus');\n        toast.error('Kunne ikke sjekke transkriberingsstatus');\n      }\n    };\n\n    if (modalStatus === 'processing') {\n      checkStatus();\n    }\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [currentRecordingId, modalStatus, onComplete, onClose]);\n\n  // Cleanup effect\n  useEffect(() => {\n    isMounted.current = true;\n    \n    return () => {\n      isMounted.current = false;\n      cleanup();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!isOpen && isMounted.current) {\n      cleanup();\n    }\n  }, [isOpen]);\n\n  const cleanup = () => {\n    if (isRecording) {\n      stopRecording().catch(console.error);\n    }\n    \n    setIsLoading(false);\n    setIsSaving(false);\n    setSaveError(null);\n    setRecordingTitle('');\n    setTitleError(null);\n    setParticipants([]);\n    setNewParticipant({ name: '', email: '' });\n    setParticipantError(null);\n    setSelectedFolder(null);\n    setCurrentRecordingId(null);\n    setModalStatus('idle');\n    setUploadProgress(0);\n\n    if (audioStream) {\n      audioStream.getTracks().forEach(track => {\n        try {\n          track.stop();\n        } catch (error) {\n          console.warn('Error stopping audio track:', error);\n        }\n      });\n      setAudioStream(null);\n    }\n\n    if (audioLevelCheckInterval.current) {\n      clearInterval(audioLevelCheckInterval.current);\n      audioLevelCheckInterval.current = undefined;\n    }\n\n    if (audioContextRef.current?.state !== 'closed') {\n      try {\n        audioContextRef.current?.close();\n      } catch (error) {\n        console.warn('Error closing AudioContext:', error);\n      }\n      audioContextRef.current = null;\n    }\n  };\n\n  // Check if microphone is muted\n  const checkAudioLevel = async (stream: MediaStream) => {\n    try {\n      // Validate stream and tracks first\n      const track = stream.getAudioTracks()[0];\n      if (!track || !track.enabled) {\n        return true; // Consider disabled track as muted\n      }\n\n      // Get track settings to check if it's actually muted\n      const settings = track.getSettings();\n      if (settings.volume === 0) {\n        return true;\n      }\n\n      if (!audioContextRef.current || audioContextRef.current.state === 'closed') {\n        audioContextRef.current = new AudioContext();\n      }\n      \n      const source = audioContextRef.current.createMediaStreamSource(stream);\n      const analyzer = audioContextRef.current.createAnalyser();\n      analyzer.fftSize = 1024;\n      analyzer.smoothingTimeConstant = 0.3;\n      analyzer.minDecibels = -70;\n      analyzer.maxDecibels = -30;\n      source.connect(analyzer);\n      \n      const dataArray = new Uint8Array(analyzer.frequencyBinCount);\n      \n      return new Promise<boolean>((resolve) => {\n        const samples: number[] = [];\n        const sampleCount = 30; // Samle flere samples for bedre nøyaktighet\n        \n        const checkLevel = () => {\n          if (!isMounted.current) {\n            resolve(false);\n            return;\n          }\n          \n          analyzer.getByteFrequencyData(dataArray);\n          // Beregn RMS-verdi for mer nøyaktig lydnivå\n          const rms = Math.sqrt(\n            dataArray.reduce((acc, val) => acc + (val * val), 0) / dataArray.length\n          );\n          \n          samples.push(rms);\n          \n          if (samples.length >= sampleCount) {\n            clearInterval(audioLevelCheckInterval.current);\n            \n            // Beregn gjennomsnittlig RMS\n            const avgRms = samples.reduce((a, b) => a + b, 0) / samples.length;\n            \n            // Bruk en mer robust terskel\n            const threshold = 5.0;\n            const isMuted = avgRms < threshold;\n            \n            console.log('Audio level check:', {\n              avgRms,\n              threshold,\n              isMuted,\n              sampleCount: samples.length\n            });\n            \n            resolve(isMuted);\n          }\n        };\n        \n        // Kjør sjekk oftere for bedre nøyaktighet\n        audioLevelCheckInterval.current = window.setInterval(checkLevel, 33);\n      });\n    } catch (error) {\n      console.error('Error checking audio level:', error);\n      return false;\n    }\n  };\n\n  // Utility functions\n  const validateEmail = (email: string) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  };\n\n  const formatDuration = (seconds: number) => {\n    if (!Number.isFinite(seconds) || seconds < 0) {\n      return '00:00';\n    }\n\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Handlers\n  const handleAddParticipant = () => {\n    setParticipantError(null);\n    \n    const { name, email } = newParticipant;\n    if (!name.trim()) {\n      setParticipantError('Navn er påkrevd');\n      return;\n    }\n    \n    if (email && !validateEmail(email)) {\n      setParticipantError('Ugyldig e-postadresse');\n      return;\n    }\n\n    setParticipants(prev => [\n      ...prev, \n      { \n        id: Date.now().toString(),\n        name: name.trim(),\n        email: email.trim()\n      }\n    ]);\n    setNewParticipant({ name: '', email: '' });\n  };\n\n  const handleRemoveParticipant = (id: string) => {\n    setParticipants(prev => prev.filter(p => p.id !== id));\n  };\n\n  const handleStartRecording = async () => {\n    if (!recordingTitle.trim()) {\n      setTitleError('Vennligst gi opptaket et navn');\n      return;\n    }\n    setTitleError(null);\n    \n    try {\n      setIsLoading(true);\n      setSaveError(null);\n\n      // Check for microphone permission first\n      const permission = await navigator.permissions.query({ name: 'microphone' as PermissionName });\n      if (permission.state === 'denied') {\n        throw new Error('Mikrofontilgang er blokkert. Gi tilgang i nettleserinnstillingene.');\n      }\n\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const hasAudioInput = devices.some(device => device.kind === 'audioinput');\n      \n      if (!hasAudioInput) {\n        throw new Error('Ingen mikrofon funnet. Koble til en mikrofon og prøv igjen.');\n      }\n\n      // Request audio with specific constraints\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          channelCount: 1,\n          sampleRate: 48000,\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          latency: 0\n        } \n      });\n\n      // Verify stream is valid\n      if (!stream || stream.getAudioTracks().length === 0) {\n        throw new Error('Kunne ikke få tilgang til mikrofonen');\n      }\n\n      const isMuted = await checkAudioLevel(stream);\n      setIsMicrophoneMuted(isMuted);\n      \n      if (isMuted && isMounted.current) {\n        toast.info('Mikrofonen ser ut til å være dempet. Sjekk mikrofoninnstillingene.');\n      }\n\n      setAudioStream(stream);\n      try {\n        await startRecording(stream);\n      } catch (recError) {\n        // Clean up stream if recording fails\n        stream.getTracks().forEach(track => track.stop());\n        throw recError;\n      }\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      \n      // Clean up any existing streams\n      if (audioStream) {\n        audioStream.getTracks().forEach(track => track.stop());\n        setAudioStream(null);\n      }\n      \n      const errorMessage = error instanceof Error \n        ? error.message \n        : 'Kunne ikke starte opptak. Sjekk mikrofontilgang.';\n      \n      if (isMounted.current) {\n        toast.error(errorMessage);\n        setSaveError(errorMessage);\n      }\n    } finally {\n      if (isMounted.current) {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const handleStopRecording = () => {\n    if (!user) {\n      setSaveError('Bruker ikke logget inn');\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      stopRecording();\n      toast.success('Opptak fullført');\n    } catch (error) {\n      console.error('Error stopping recording:', error);\n      toast.error('Kunne ikke stoppe opptaket');\n      setSaveError('Kunne ikke stoppe opptaket');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!audioBlob || !user) {\n      setSaveError('Mangler lydopptak eller bruker ikke logget inn');\n      toast.error('Mangler lydopptak eller bruker ikke logget inn');\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      setSaveError(null);\n      setModalStatus('uploading');\n      setUploadProgress(0);\n\n      const file = new File([audioBlob], `${recordingTitle}.webm`, {\n        type: audioBlob.type\n      });\n\n      const recording = await uploadRecording(\n        file,\n        recordingTitle,\n        selectedFolder,\n        participants.map(p => ({\n          name: p.name,\n          email: p.email\n        })),\n        duration,\n        setUploadProgress\n      );\n\n      if (isMounted.current) {\n        setCurrentRecordingId(recording.id);\n        setModalStatus('processing');\n        toast.success('Opptak lastet opp og transkribering startet');\n      }\n    } catch (error) {\n      console.error('Error saving recording:', error);\n      if (isMounted.current) {\n        setModalStatus('error');\n        const errorMessage = error instanceof Error\n          ? error.message \n          : 'Kunne ikke lagre opptaket';\n        toast.error(errorMessage);\n        setSaveError(errorMessage);\n      }\n    } finally {\n      if (isMounted.current) {\n        setIsSaving(false);\n      }\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-hidden\">\n      <div className=\"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <div className={cn(\n                \"p-2 rounded-full\",\n                isRecording ? \"bg-red-100\" : \"bg-gray-100\",\n                modalStatus === 'processing' && \"bg-yellow-100\",\n                modalStatus === 'completed' && \"bg-green-100\",\n                modalStatus === 'error' && \"bg-red-100\"\n              )}>\n                <Mic className={cn(\n                  \"h-5 w-5\",\n                  isRecording ? \"text-red-600\" : \"text-gray-600\",\n                  modalStatus === 'processing' && \"text-yellow-600\",\n                  modalStatus === 'completed' && \"text-green-600\",\n                  modalStatus === 'error' && \"text-red-600\"\n                )} />\n              </div>\n              <div>\n                <h3 className=\"font-semibold\">\n                  {isRecording ? 'Opptak pågår' : STATUS_MESSAGES[modalStatus]}\n                </h3>\n                <div className=\"flex items-center text-sm text-gray-600\">\n                  <Clock className=\"h-4 w-4 mr-1\" />\n                  <span>{formatDuration(duration)}</span>\n                  {isMicrophoneMuted && (\n                    <div className=\"flex items-center ml-2 text-amber-600\">\n                      <VolumeX className=\"h-4 w-4 mr-1\" />\n                      <span>Mikrofon dempet</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n            <button \n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full\"\n              disabled={isRecording || isSaving}\n            >\n              <X className=\"h-5 w-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {(recordingError || saveError) && (\n            <div className=\"mt-4 p-3 bg-red-50 text-red-600 rounded-lg text-sm flex items-center\">\n              <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\n              <span>{recordingError || saveError}</span>\n            </div>\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"p-8 overflow-y-auto flex-1\">\n          {!isRecording && !audioBlob && (\n            <div className=\"space-y-6\">\n              {/* Title input */}\n              <div>\n                <label htmlFor=\"recordingTitle\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Navn på opptak\n                </label>\n                <div className=\"relative\">\n                  <input\n                    id=\"recordingTitle\"\n                    type=\"text\"\n                    value={recordingTitle}\n                    onChange={(e) => {\n                      setRecordingTitle(e.target.value);\n                      setTitleError(null);\n                    }}\n                    placeholder=\"F.eks. Ukentlig møte\"\n                    className={cn(\n                      \"w-full rounded-lg border px-4 py-2 focus:border-violet-500 focus:ring-violet-500\",\n                      titleError ? \"border-red-300\" : \"border-gray-300\"\n                    )}\n                    disabled={isRecording}\n                  />\n                  {titleError && (\n                    <div className=\"absolute right-0 top-0 h-full flex items-center pr-3\">\n                      <AlertCircle className=\"h-5 w-5 text-red-500\" />\n                    </div>\n                  )}\n                </div>\n                {titleError && (\n                  <p className=\"mt-2 text-sm text-red-600\">{titleError}</p>\n                )}\n              </div>\n\n              {/* Folder selector */}\n              {folders.length > 0 && (\n                <div>\n                  <FolderSelect\n                    currentFolderId={selectedFolder}\n                    onFolderChange={setSelectedFolder}\n                    disabled={isRecording || isSaving}\n                  />\n                </div>\n              )}\n\n              {/* Participants section */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Legg til deltakere (valgfritt)\n                </label>\n                \n                <div className=\"space-y-3 mb-4\">\n                  {participants.map(participant => (\n                    <div \n                      key={participant.id}\n                      className=\"flex items-center justify-between p-3 rounded-lg border border-gray-200 bg-gray-50\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"p-2 rounded-full bg-violet-100\">\n                          <UserPlus className=\"h-4 w-4 text-violet-600\" />\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-sm\">{participant.name}</p>\n                          {participant.email && (\n                            <p className=\"text-sm text-gray-600\">{participant.email}</p>\n                          )}\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => handleRemoveParticipant(participant.id)}\n                        className=\"p-1.5 text-gray-400 hover:text-red-600 rounded-lg hover:bg-red-50\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"space-y-3\">\n                  <div className=\"flex space-x-2\">\n                    <div className=\"flex-1\">\n                      <input\n                        type=\"text\"\n                        value={newParticipant.name}\n                        onChange={(e) => setNewParticipant(prev => ({ \n                          ...prev, \n                          name: e.target.value \n                        }))}\n                        placeholder=\"Navn\"\n                        className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-violet-500\"\n                      />\n                    </div>\n                    <div className=\"flex-1\">\n                      <input\n                        type=\"email\"\n                        value={newParticipant.email}\n                        onChange={(e) => setNewParticipant(prev => ({ \n                          ...prev, \n                          email: e.target.value \n                        }))}\n                        placeholder=\"E-post (valgfritt)\"\n                        className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-violet-500\"\n                      />\n                    </div>\n                    <button\n                      onClick={handleAddParticipant}\n                      className=\"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors\"\n                    >\n                      <UserPlus className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                  {participantError && (\n                    <p className=\"text-sm text-red-600\">{participantError}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Recording/Processing UI */}\n          <div className=\"flex flex-col items-center justify-center mt-6\">\n            {isRecording ? (\n              <div className=\"flex flex-col items-center\">\n                {audioStream && <AudioVisualizer stream={audioStream} />}\n                <p className=\"text-sm text-gray-500 mt-2\">{recordingTitle}</p>\n              </div>\n            ) : isProcessing || isSaving || modalStatus !== 'idle' ? (\n              <div className=\"flex flex-col items-center\">\n                <div className=\"relative\">\n                  <div className=\"w-24 h-24\">\n                    <svg className=\"w-full h-full\" viewBox=\"0 0 100 100\">\n                      <circle\n                        className=\"text-gray-200\"\n                        strokeWidth=\"8\"\n                        stroke=\"currentColor\"\n                        fill=\"transparent\"\n                        r=\"42\"\n                        cx=\"50\"\n                        cy=\"50\"\n                      />\n                      <circle\n                        className={cn(\n                          \"transition-all duration-300\",\n                          modalStatus === 'error' ? \"text-red-600\" : \"text-violet-600\"\n                        )}\n                        strokeWidth=\"8\"\n                        strokeLinecap=\"round\"\n                        stroke=\"currentColor\"\n                        fill=\"transparent\"\n                        r=\"42\"\n                        cx=\"50\"\n                        cy=\"50\"\n                        style={{\n                          strokeDasharray: 264,\n                          strokeDashoffset: 264 - (modalStatus === 'uploading' ? uploadProgress : uploadProgress) / 100 * 264\n                        }}\n                      />\n                    </svg>\n                    <span className=\"absolute inset-0 flex items-center justify-center text-lg font-medium\">\n                      {modalStatus === 'uploading' ? uploadProgress : uploadProgress}%\n                    </span>\n                  </div>\n                </div>\n                <p className=\"text-gray-600 mt-4\">\n                  {STATUS_DESCRIPTIONS[modalStatus]}\n                </p>\n              </div>\n            ) : audioBlob ? (\n              <div className=\"flex flex-col items-center\">\n                <p className=\"text-gray-600 mb-4\">Opptak fullført</p>\n                <button\n                  onClick={handleUpload}\n                  disabled={isLoading || isSaving}\n                  className=\"button-primary px-8 py-4 text-lg flex items-center\"\n                >\n                  {(isLoading || isSaving) ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2\" />\n                      Lagrer...\n                    </>\n                  ) : (\n                    'Lagre opptak'\n                  )}\n                </button>\n              </div>\n            ) : (\n              <button\n                onClick={handleStartRecording}\n                disabled={isLoading || !recordingTitle.trim()}\n                className={cn(\n                  \"button-primary px-8 py-4 text-lg flex items-center\",\n                  !recordingTitle.trim() && \"opacity-50 cursor-not-allowed\"\n                )}\n              >\n                {isLoading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2\" />\n                    Starter...\n                  </>\n                ) : (\n                  <>\n                    <Mic className=\"h-6 w-6 mr-2\" />\n                    Start opptak\n                  </>\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 border-t border-gray-200 flex-shrink-0\">\n          <div className=\"flex items-center justify-between\">\n            {isRecording && (\n              <button \n                onClick={handleStopRecording}\n                className=\"button-primary bg-red-600 hover:bg-red-700\"\n              >\n                Stopp opptak\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2417, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/lib/fileValidation.ts"],"sourcesContent":["\n\n// Maximum file size in bytes (100MB)\nexport const MAX_FILE_SIZE = 100 * 1024 * 1024;\n\nexport interface ValidationResult {\n  isValid: boolean;\n  error?: string;\n  url?: string;\n}\n\nexport async function validateAudioFile(file: File): Promise<ValidationResult> {\n  const isAudioOrVideo = file.type.startsWith('audio/') || file.type.startsWith('video/');\n  if (!isAudioOrVideo) {\n    return {\n      isValid: false,\n      error: 'Vennligst velg en gyldig lyd- eller videofil'\n    };\n  }\n\n  if (file.size > MAX_FILE_SIZE) {\n    const sizeMB = Math.round(MAX_FILE_SIZE / (1024 * 1024));\n    return {\n      isValid: false,\n      error: `Filen er for stor. Maksimal størrelse er ${sizeMB}MB.`\n    };\n  }\n\n  if (file.size === 0) {\n    return {\n      isValid: false,\n      error: 'Filen er tom'\n    };\n  }\n\n  // Check if file type is supported by Salad\n  if (!transcriptionConfig.audio.allowedTypes.includes(file.type)) {\n    return {\n      isValid: false,\n      error: 'Filformatet støttes ikke. Støttede formater: MP3, WAV, AAC, MP4, MOV, MKV, WebM'\n    };\n  }\n\n  // Verify file can be read\n  try {\n    const arrayBuffer = await file.arrayBuffer();\n    if (!arrayBuffer || arrayBuffer.byteLength === 0) {\n      return {\n        isValid: false,\n        error: 'Kunne ikke lese filen'\n      };\n    }\n  } catch (error) {\n    console.error('Error reading file:', error);\n    return {\n      isValid: false,\n      error: 'Kunne ikke lese filen'\n    };\n  }\n\n  return { isValid: true };\n}"],"names":[],"mappings":"AAEA,qCAAqC;;;;;AAC9B,MAAM,gBAAgB,MAAM,OAAO;AAQnC,eAAe,kBAAkB,IAAU;IAChD,MAAM,iBAAiB,KAAK,IAAI,CAAC,UAAU,CAAC,aAAa,KAAK,IAAI,CAAC,UAAU,CAAC;IAC9E,IAAI,CAAC,gBAAgB;QACnB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,IAAI,KAAK,IAAI,GAAG,eAAe;QAC7B,MAAM,SAAS,KAAK,KAAK,CAAC,gBAAgB,CAAC,OAAO,IAAI;QACtD,OAAO;YACL,SAAS;YACT,OAAO,CAAC,yCAAyC,EAAE,OAAO,GAAG,CAAC;QAChE;IACF;IAEA,IAAI,KAAK,IAAI,KAAK,GAAG;QACnB,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,2CAA2C;IAC3C,IAAI,CAAC,oBAAoB,KAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,IAAI,GAAG;QAC/D,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,0BAA0B;IAC1B,IAAI;QACF,MAAM,cAAc,MAAM,KAAK,WAAW;QAC1C,IAAI,CAAC,eAAe,YAAY,UAAU,KAAK,GAAG;YAChD,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;YACL,SAAS;YACT,OAAO;QACT;IACF;IAEA,OAAO;QAAE,SAAS;IAAK;AACzB","debugId":null}},
    {"offset": {"line": 2477, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/FileUploadModal.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { X, Upload, AlertCircle } from 'lucide-react';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { uploadRecording } from '@/services/recordingService';\nimport { validateAudioFile } from '@/lib/fileValidation';\nimport { cn } from '@/lib/utils';\n\ninterface FileUploadModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onUploadComplete: () => void;\n}\n\nexport default function FileUploadModal({ \n  isOpen, \n  onClose,\n  onUploadComplete\n}: FileUploadModalProps) {\n  const { user } = useAuth();\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [title, setTitle] = useState('');\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n\n  if (!isOpen) return null;\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    const validation = validateAudioFile(file);\n    if (!validation.isValid) {\n      setError(validation.error);\n      return;\n    }\n\n    setSelectedFile(file);\n    setError(null);\n    // Sett standard tittel basert på filnavn, fjern extension\n    setTitle(file.name.replace(/\\.[^/.]+$/, ''));\n  };\n\n  const handleUpload = async () => {\n    if (!selectedFile || !user || !title.trim()) {\n      setError('Vennligst fyll ut alle felt');\n      return;\n    }\n\n    try {\n      setIsUploading(true);\n      setError(null);\n      \n      const recording = await uploadRecording(selectedFile, user.id, title);\n      console.log('Upload completed successfully', recording);\n      onUploadComplete();\n      onClose();\n    } catch (err) {\n      console.error('Upload error:', err);\n      setError(err instanceof Error ? err.message : 'Kunne ikke laste opp filen');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-md\">\n        {/* Header */}\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"font-semibold\">Last opp lydopptak</h3>\n            <button \n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full\"\n              disabled={isUploading}\n            >\n              <X className=\"h-5 w-5 text-gray-500\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6\">\n          {error && (\n            <div className=\"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm flex items-center\">\n              <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\n              {error}\n            </div>\n          )}\n\n          <div className=\"space-y-4\">\n            {/* Fil velger */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Velg lydfil\n              </label>\n              <label \n                className={cn(\n                  \"block w-full border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors\",\n                  selectedFile ? \"border-violet-500 bg-violet-50\" : \"border-gray-300 hover:border-gray-400\"\n                )}\n              >\n                <input\n                  type=\"file\"\n                  className=\"hidden\"\n                  accept=\"audio/*\"\n                  onChange={handleFileSelect}\n                  disabled={isUploading}\n                />\n                <Upload className={cn(\n                  \"h-8 w-8 mx-auto mb-2\",\n                  selectedFile ? \"text-violet-500\" : \"text-gray-400\"\n                )} />\n                {selectedFile ? (\n                  <span className=\"text-sm text-violet-600\">\n                    {selectedFile.name}\n                  </span>\n                ) : (\n                  <span className=\"text-sm text-gray-500\">\n                    Klikk for å velge fil eller dra og slipp\n                  </span>\n                )}\n              </label>\n            </div>\n\n            {/* Tittel */}\n            <div>\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Tittel\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                className=\"w-full px-4 py-2 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-violet-500\"\n                placeholder=\"Gi opptaket en tittel\"\n                disabled={isUploading}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 border-t border-gray-200\">\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors\"\n              disabled={isUploading}\n            >\n              Avbryt\n            </button>\n            <button\n              onClick={handleUpload}\n              disabled={!selectedFile || !title.trim() || isUploading}\n              className={cn(\n                \"px-4 py-2 rounded-lg text-white transition-colors\",\n                isUploading || !selectedFile || !title.trim()\n                  ? \"bg-gray-400 cursor-not-allowed\"\n                  : \"bg-violet-600 hover:bg-violet-700\"\n              )}\n            >\n              {isUploading ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                  Laster opp...\n                </div>\n              ) : (\n                'Last opp'\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2774, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/FolderRenameModal.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { X, Folder, AlertCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface FolderRenameModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRename: (newName: string) => Promise<void>;\n  currentName: string;\n}\n\nexport default function FolderRenameModal({\n  isOpen,\n  onClose,\n  onRename,\n  currentName\n}: FolderRenameModalProps) {\n  const [newName, setNewName] = useState(currentName);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Reset newName when modal opens with a different folder\n  useEffect(() => {\n    if (isOpen) {\n      setNewName(currentName);\n      setError(null);\n    }\n  }, [isOpen, currentName]);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!newName.trim()) {\n      setError('Vennligst skriv inn et mappenavn');\n      return;\n    }\n\n    if (newName.trim() === currentName) {\n      onClose();\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      setError(null);\n      await onRename(newName.trim());\n      onClose();\n    } catch (err) {\n      console.error('Error renaming folder:', err);\n      setError(err instanceof Error ? err.message : 'Kunne ikke endre navn på mappen');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-md\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"font-semibold\">Endre mappenavn</h3>\n            <button \n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full\"\n              disabled={isLoading}\n            >\n              <X className=\"h-5 w-5 text-gray-500\" />\n            </button>\n          </div>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6\">\n          {error && (\n            <div className=\"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm flex items-center\">\n              <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\n              {error}\n            </div>\n          )}\n\n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"folderName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Mappenavn\n              </label>\n              <div className=\"relative\">\n                <Folder className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  id=\"folderName\"\n                  value={newName}\n                  onChange={(e) => {\n                    setNewName(e.target.value);\n                    setError(null);\n                  }}\n                  className=\"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-violet-500\"\n                  disabled={isLoading}\n                  autoFocus\n                  onFocus={(e) => e.target.select()}\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors\"\n              disabled={isLoading}\n            >\n              Avbryt\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isLoading || !newName.trim() || newName.trim() === currentName}\n              className={cn(\n                \"px-4 py-2 rounded-lg text-white transition-colors\",\n                isLoading || !newName.trim() || newName.trim() === currentName\n                  ? \"bg-gray-400 cursor-not-allowed\"\n                  : \"bg-violet-600 hover:bg-violet-700\"\n              )}\n            >\n              {isLoading ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                  Lagrer...\n                </div>\n              ) : (\n                'Lagre'\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;;;;;AASe,SAAS,kBAAkB,EACxC,MAAM,EACN,OAAO,EACP,QAAQ,EACR,WAAW,EACY;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,yDAAyD;IACzD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV,WAAW;YACX,SAAS;QACX;IACF,GAAG;QAAC;QAAQ;KAAY;IAExB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,QAAQ,IAAI,IAAI;YACnB,SAAS;YACT;QACF;QAEA,IAAI,QAAQ,IAAI,OAAO,aAAa;YAClC;YACA;QACF;QAEA,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM,SAAS,QAAQ,IAAI;YAC3B;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,UAAU;0CAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;8BAKnB,8OAAC;oBAAK,UAAU;oBAAc,WAAU;;wBACrC,uBACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,oNAAA,CAAA,cAAW;oCAAC,WAAU;;;;;;gCACtB;;;;;;;sCAIL,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;;kDACC,8OAAC;wCAAM,SAAQ;wCAAa,WAAU;kDAA+C;;;;;;kDAGrF,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,sMAAA,CAAA,SAAM;gDAAC,WAAU;;;;;;0DAClB,8OAAC;gDACC,MAAK;gDACL,IAAG;gDACH,OAAO;gDACP,UAAU,CAAC;oDACT,WAAW,EAAE,MAAM,CAAC,KAAK;oDACzB,SAAS;gDACX;gDACA,WAAU;gDACV,UAAU;gDACV,SAAS;gDACT,SAAS,CAAC,IAAM,EAAE,MAAM,CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;sCAMvC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;oCACV,UAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,UAAU,aAAa,CAAC,QAAQ,IAAI,MAAM,QAAQ,IAAI,OAAO;oCAC7D,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qDACA,aAAa,CAAC,QAAQ,IAAI,MAAM,QAAQ,IAAI,OAAO,cAC/C,mCACA;8CAGL,0BACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;;;;;4CAAsF;;;;;;+CAIvG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB","debugId":null}},
    {"offset": {"line": 3017, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/DeleteConfirmationDialog.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { X, AlertTriangle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface DeleteConfirmationDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => Promise<void>;\n  title: string;\n  message: string;\n}\n\nexport default function DeleteConfirmationDialog({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message\n}: DeleteConfirmationDialogProps) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  if (!isOpen) return null;\n\n  const handleConfirm = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      await onConfirm();\n      onClose();\n    } catch (err) {\n      console.error('Error in confirmation action:', err);\n      setError(err instanceof Error ? err.message : 'En feil oppstod');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-md\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2 text-red-600\">\n              <AlertTriangle className=\"h-5 w-5\" />\n              <h3 className=\"font-semibold\">{title}</h3>\n            </div>\n            <button \n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full\"\n              disabled={isLoading}\n            >\n              <X className=\"h-5 w-5 text-gray-500\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          {error && (\n            <div className=\"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm\">\n              {error}\n            </div>\n          )}\n\n          <p className=\"text-gray-600\">{message}</p>\n\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 transition-colors\"\n              disabled={isLoading}\n            >\n              Avbryt\n            </button>\n            <button\n              onClick={handleConfirm}\n              disabled={isLoading}\n              className={cn(\n                \"px-4 py-2 rounded-lg text-white transition-colors\",\n                isLoading\n                  ? \"bg-red-400 cursor-not-allowed\"\n                  : \"bg-red-600 hover:bg-red-700\"\n              )}\n            >\n              {isLoading ? (\n                <div className=\"flex items-center\">\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2\" />\n                  Sletter...\n                </div>\n              ) : (\n                'Slett'\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;;;;;AAUe,SAAS,yBAAyB,EAC/C,MAAM,EACN,OAAO,EACP,SAAS,EACT,KAAK,EACL,OAAO,EACuB;IAC9B,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,gBAAgB;QACpB,IAAI;YACF,aAAa;YACb,SAAS;YACT,MAAM;YACN;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,wNAAA,CAAA,gBAAa;wCAAC,WAAU;;;;;;kDACzB,8OAAC;wCAAG,WAAU;kDAAiB;;;;;;;;;;;;0CAEjC,8OAAC;gCACC,SAAS;gCACT,WAAU;gCACV,UAAU;0CAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;8BAKnB,8OAAC;oBAAI,WAAU;;wBACZ,uBACC,8OAAC;4BAAI,WAAU;sCACZ;;;;;;sCAIL,8OAAC;4BAAE,WAAU;sCAAiB;;;;;;sCAE9B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,WAAU;oCACV,UAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;oCACT,UAAU;oCACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qDACA,YACI,kCACA;8CAGL,0BACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;;;;;4CAAsF;;;;;;+CAIvG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhB","debugId":null}},
    {"offset": {"line": 3195, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/services/tagService.ts"],"sourcesContent":["\n\nexport async function getTags() {\n  try {\n    const { data: { user }, error: userError } = await supabase.auth.getUser();\n    if (userError || !user) {\n      console.error('Auth error in getTags:', userError);\n      return [];\n    }\n\n    const { data, error } = await supabase\n      .from('tags')\n      .select('*')\n      .order('name', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching tags:', error);\n      return [];\n    }\n\n    return data || [];\n  } catch (err) {\n    console.error('Error in getTags:', err);\n    return [];\n  }\n}\n\nexport async function createTag(name: string) {\n  try {\n    const trimmedName = name.trim();\n    if (!trimmedName) {\n      throw new Error('Etikettnavnet kan ikke være tomt');\n    }\n\n    const { data: { user }, error: userError } = await supabase.auth.getUser();\n    if (userError || !user) {\n      throw new Error('Bruker ikke logget inn');\n    }\n\n    const { data, error } = await supabase\n      .from('tags')\n      .insert({\n        name: trimmedName,\n        user_id: user.id\n      })\n      .select()\n      .single();\n\n    if (error) {\n      if (error.code === '23505') {\n        throw new Error('En etikett med dette navnet eksisterer allerede');\n      }\n      throw error;\n    }\n\n    return data;\n  } catch (err) {\n    console.error('Error in createTag:', err);\n    throw err;\n  }\n}\n\nexport async function updateTag(id: string, name: string) {\n  try {\n    const trimmedName = name.trim();\n    if (!trimmedName) {\n      throw new Error('Etikettnavnet kan ikke være tomt');\n    }\n\n    const { data, error } = await supabase\n      .from('tags')\n      .update({\n        name: trimmedName,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) {\n      if (error.code === '23505') {\n        throw new Error('En etikett med dette navnet eksisterer allerede');\n      }\n      throw error;\n    }\n\n    return data;\n  } catch (err) {\n    console.error('Error in updateTag:', err);\n    throw err;\n  }\n}\n\nexport async function deleteTag(id: string) {\n  try {\n    const { error } = await supabase\n      .from('tags')\n      .delete()\n      .eq('id', id);\n\n    if (error) throw error;\n  } catch (err) {\n    console.error('Error in deleteTag:', err);\n    throw err;\n  }\n}\n\nexport async function getRecordingTags(recordingId: string) {\n  try {\n    const { data, error } = await supabase\n      .from('recording_tags')\n      .select(`\n        tag_id,\n        tags:tag_id (\n          id,\n          name\n        )\n      `)\n      .eq('recording_id', recordingId);\n\n    if (error) throw error;\n\n    return (data || []).map(item => item.tags as Tag);\n  } catch (err) {\n    console.error('Error in getRecordingTags:', err);\n    throw err;\n  }\n}\n\nexport async function updateRecordingTags(recordingId: string, tagIds: string[]) {\n  try {\n    // First delete existing tags\n    const { error: deleteError } = await supabase\n      .from('recording_tags')\n      .delete()\n      .eq('recording_id', recordingId);\n\n    if (deleteError) throw deleteError;\n\n    // Then insert new tags if any\n    if (tagIds.length > 0) {\n      const { error: insertError } = await supabase\n        .from('recording_tags')\n        .insert(\n          tagIds.map(tagId => ({\n            recording_id: recordingId,\n            tag_id: tagId\n          }))\n        );\n\n      if (insertError) throw insertError;\n    }\n  } catch (err) {\n    console.error('Error in updateRecordingTags:', err);\n    throw err;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3320, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/TagEditor.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { X, Plus, Trash2, Pencil, Check } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { getTags, createTag, updateTag, deleteTag } from '@/services/tagService';\nimport DeleteConfirmationDialog from './DeleteConfirmationDialog';\nimport type { Tag } from '@/types/database';\n\ninterface TagEditorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSave?: () => void;\n}\n\nexport default function TagEditor({\n  isOpen,\n  onClose,\n  onSave\n}: TagEditorProps) {\n  const [tags, setTags] = useState<Tag[]>([]);\n  const [newTag, setNewTag] = useState('');\n  const [editingIndex, setEditingIndex] = useState<string | null>(null);\n  const [editingValue, setEditingValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [tagToDelete, setTagToDelete] = useState<Tag | null>(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchTags();\n    }\n  }, [isOpen]);\n\n  const fetchTags = async () => {\n    try {\n      const fetchedTags = await getTags();\n      setTags(fetchedTags);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Kunne ikke hente etiketter');\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const handleAddTag = async () => {\n    if (!newTag.trim()) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      const createdTag = await createTag(newTag.trim());\n      setTags(prev => [...prev, createdTag]);\n      setNewTag('');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Kunne ikke legge til etikett');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleRemoveTag = async () => {\n    if (!tagToDelete) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      await deleteTag(tagToDelete.id);\n      setTags(prev => prev.filter(tag => tag.id !== tagToDelete.id));\n      setTagToDelete(null);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Kunne ikke slette etikett');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const startEditing = (tag: Tag) => {\n    setEditingIndex(tag.id);\n    setEditingValue(tag.name);\n    setError(null);\n  };\n\n  const handleEditTag = async () => {\n    if (!editingIndex) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      const updatedTag = await updateTag(editingIndex, editingValue);\n      setTags(prev => prev.map(tag => \n        tag.id === editingIndex ? updatedTag : tag\n      ));\n      setEditingIndex(null);\n      setEditingValue('');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Kunne ikke oppdatere etikett');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (onSave) {\n      onSave();\n    }\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-2xl w-full max-w-md flex flex-col max-h-[90vh]\">\n        <div className=\"p-4 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"font-semibold\">Rediger etiketter</h3>\n            <button \n              onClick={handleClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full\"\n              disabled={isLoading}\n            >\n              <X className=\"h-5 w-5 text-gray-500\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 overflow-y-auto flex-1\">\n          {error && (\n            <div className=\"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm\">\n              {error}\n            </div>\n          )}\n\n          <div className=\"space-y-4\">\n            {/* Existing tags */}\n            <div className=\"space-y-2\">\n              {tags.map((tag) => (\n                <div \n                  key={tag.id}\n                  className=\"flex items-center justify-between p-2 rounded-lg border border-gray-200 bg-gray-50\"\n                >\n                  {editingIndex === tag.id ? (\n                    <input\n                      type=\"text\"\n                      value={editingValue}\n                      onChange={(e) => {\n                        setEditingValue(e.target.value);\n                        setError(null);\n                      }}\n                      className=\"flex-1 px-3 py-1 rounded-md border border-violet-300 focus:border-violet-500 focus:ring-violet-500 mr-2\"\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') {\n                          e.preventDefault();\n                          handleEditTag();\n                        } else if (e.key === 'Escape') {\n                          setEditingIndex(null);\n                          setEditingValue('');\n                          setError(null);\n                        }\n                      }}\n                      autoFocus\n                    />\n                  ) : (\n                    <span className=\"text-gray-700\">{tag.name}</span>\n                  )}\n                  <div className=\"flex items-center space-x-1\">\n                    {editingIndex === tag.id ? (\n                      <button\n                        onClick={handleEditTag}\n                        className=\"p-1.5 text-green-600 hover:bg-green-50 rounded-lg\"\n                        disabled={isLoading}\n                      >\n                        <Check className=\"h-4 w-4\" />\n                      </button>\n                    ) : (\n                      <button\n                        onClick={() => startEditing(tag)}\n                        className=\"p-1.5 text-gray-400 hover:text-violet-600 hover:bg-violet-50 rounded-lg\"\n                        disabled={isLoading}\n                      >\n                        <Pencil className=\"h-4 w-4\" />\n                      </button>\n                    )}\n                    <button\n                      onClick={() => setTagToDelete(tag)}\n                      className=\"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg\"\n                      disabled={isLoading}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Add new tag */}\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"text\"\n                value={newTag}\n                onChange={(e) => {\n                  setNewTag(e.target.value);\n                  setError(null);\n                }}\n                placeholder=\"Skriv inn ny etikett...\"\n                className=\"flex-1 px-4 py-2 rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-violet-500\"\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    handleAddTag();\n                  }\n                }}\n                disabled={isLoading}\n              />\n              <button\n                onClick={handleAddTag}\n                className=\"p-2 text-violet-600 hover:bg-violet-50 rounded-lg\"\n                disabled={isLoading || !newTag.trim()}\n              >\n                <Plus className=\"h-5 w-5\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-4 border-t border-gray-200\">\n          <div className=\"flex justify-end\">\n            <button\n              onClick={handleClose}\n              className={cn(\n                \"px-4 py-2 rounded-lg text-white transition-colors\",\n                isLoading\n                  ? \"bg-gray-400 cursor-not-allowed\"\n                  : \"bg-violet-600 hover:bg-violet-700\"\n              )}\n            >\n              Lukk\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      <DeleteConfirmationDialog\n        isOpen={!!tagToDelete}\n        onClose={() => setTagToDelete(null)}\n        onConfirm={handleRemoveTag}\n        title=\"Slett etikett\"\n        message={`Er du sikker på at du vil slette etiketten \"${tagToDelete?.name}\"? Denne handlingen kan ikke angres.`}\n      />\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3694, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/components/Pagination.tsx"],"sourcesContent":["import { ChevronLeft, ChevronRight } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n}\n\nexport default function Pagination({ \n  currentPage, \n  totalPages, \n  onPageChange \n}: PaginationProps) {\n  // Generer sideknapper med ellipsis for mange sider\n  const getPageNumbers = () => {\n    const pages = [];\n    const showEllipsisStart = currentPage > 3;\n    const showEllipsisEnd = currentPage < totalPages - 2;\n\n    if (totalPages <= 7) {\n      // Vis alle sider hvis det er 7 eller færre\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i);\n      }\n    } else {\n      // Alltid vis første side\n      pages.push(1);\n\n      if (showEllipsisStart) {\n        pages.push('ellipsis');\n      }\n\n      // Vis sider rundt nåværende side\n      for (let i = Math.max(2, currentPage - 1); \n           i <= Math.min(totalPages - 1, currentPage + 1); \n           i++) {\n        pages.push(i);\n      }\n\n      if (showEllipsisEnd) {\n        pages.push('ellipsis');\n      }\n\n      // Alltid vis siste side\n      if (totalPages > 1) {\n        pages.push(totalPages);\n      }\n    }\n\n    return pages;\n  };\n\n  if (totalPages <= 1) return null;\n\n  return (\n    <div className=\"flex items-center justify-center space-x-2\">\n      {/* Forrige-knapp */}\n      <button\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n        className={cn(\n          \"p-2 rounded-lg transition-colors\",\n          currentPage === 1\n            ? \"text-gray-400 cursor-not-allowed\"\n            : \"text-gray-600 hover:bg-gray-100\"\n        )}\n        aria-label=\"Forrige side\"\n      >\n        <ChevronLeft className=\"h-5 w-5\" />\n      </button>\n\n      {/* Sideknapper */}\n      {getPageNumbers().map((page, index) => (\n        page === 'ellipsis' ? (\n          <span \n            key={`ellipsis-${index}`}\n            className=\"px-4 py-2 text-gray-400\"\n          >\n            ...\n          </span>\n        ) : (\n          <button\n            key={page}\n            onClick={() => onPageChange(page as number)}\n            className={cn(\n              \"min-w-[40px] h-10 px-4 rounded-lg transition-colors\",\n              currentPage === page\n                ? \"bg-violet-600 text-white\"\n                : \"text-gray-600 hover:bg-gray-100\"\n            )}\n          >\n            {page}\n          </button>\n        )\n      ))}\n\n      {/* Neste-knapp */}\n      <button\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n        className={cn(\n          \"p-2 rounded-lg transition-colors\",\n          currentPage === totalPages\n            ? \"text-gray-400 cursor-not-allowed\"\n            : \"text-gray-600 hover:bg-gray-100\"\n        )}\n        aria-label=\"Neste side\"\n      >\n        <ChevronRight className=\"h-5 w-5\" />\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;;AAQe,SAAS,WAAW,EACjC,WAAW,EACX,UAAU,EACV,YAAY,EACI;IAChB,mDAAmD;IACnD,MAAM,iBAAiB;QACrB,MAAM,QAAQ,EAAE;QAChB,MAAM,oBAAoB,cAAc;QACxC,MAAM,kBAAkB,cAAc,aAAa;QAEnD,IAAI,cAAc,GAAG;YACnB,2CAA2C;YAC3C,IAAK,IAAI,IAAI,GAAG,KAAK,YAAY,IAAK;gBACpC,MAAM,IAAI,CAAC;YACb;QACF,OAAO;YACL,yBAAyB;YACzB,MAAM,IAAI,CAAC;YAEX,IAAI,mBAAmB;gBACrB,MAAM,IAAI,CAAC;YACb;YAEA,iCAAiC;YACjC,IAAK,IAAI,IAAI,KAAK,GAAG,CAAC,GAAG,cAAc,IAClC,KAAK,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc,IAC5C,IAAK;gBACR,MAAM,IAAI,CAAC;YACb;YAEA,IAAI,iBAAiB;gBACnB,MAAM,IAAI,CAAC;YACb;YAEA,wBAAwB;YACxB,IAAI,aAAa,GAAG;gBAClB,MAAM,IAAI,CAAC;YACb;QACF;QAEA,OAAO;IACT;IAEA,IAAI,cAAc,GAAG,OAAO;IAE5B,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,SAAS,IAAM,aAAa,cAAc;gBAC1C,UAAU,gBAAgB;gBAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oCACA,gBAAgB,IACZ,qCACA;gBAEN,cAAW;0BAEX,cAAA,8OAAC,oNAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;;;;;;YAIxB,iBAAiB,GAAG,CAAC,CAAC,MAAM,QAC3B,SAAS,2BACP,8OAAC;oBAEC,WAAU;8BACX;mBAFM,CAAC,SAAS,EAAE,OAAO;;;;yCAM1B,8OAAC;oBAEC,SAAS,IAAM,aAAa;oBAC5B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uDACA,gBAAgB,OACZ,6BACA;8BAGL;mBATI;;;;;0BAeX,8OAAC;gBACC,SAAS,IAAM,aAAa,cAAc;gBAC1C,UAAU,gBAAgB;gBAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oCACA,gBAAgB,aACZ,qCACA;gBAEN,cAAW;0BAEX,cAAA,8OAAC,sNAAA,CAAA,eAAY;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIhC","debugId":null}},
    {"offset": {"line": 3802, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/services/meetingService.ts"],"sourcesContent":["\n\nexport async function deleteMeeting(meetingId: string) {\n  try {\n    // First, get the recording details to get the file path\n    const { data: recording, error: fetchError } = await supabase\n      .from('recordings')\n      .select('file_url')\n      .eq('id', meetingId)\n      .single();\n\n    if (fetchError) throw fetchError;\n\n    if (recording?.file_url) {\n      // Extract the file path from the URL\n      const url = new URL(recording.file_url);\n      const pathParts = url.pathname.split('/');\n      const userId = pathParts[pathParts.length - 2];\n      const fileName = pathParts[pathParts.length - 1];\n      const filePath = `${userId}/${fileName}`;\n\n      // Delete the file from storage\n      const { error: storageError } = await supabase.storage\n        .from('recordings')\n        .remove([filePath]);\n\n      if (storageError) {\n        console.error('Storage deletion error:', storageError);\n        // Continue with database deletion even if storage deletion fails\n      }\n    }\n\n    // Delete the recording (this will cascade to transcriptions due to foreign key constraints)\n    const { error: deleteError } = await supabase\n      .from('recordings')\n      .delete()\n      .eq('id', meetingId);\n\n    if (deleteError) throw deleteError;\n  } catch (error) {\n    console.error('Error deleting meeting:', error);\n    throw new Error('Kunne ikke slette møtet');\n  }\n}"],"names":[],"mappings":";;;AAEO,eAAe,cAAc,SAAiB;IACnD,IAAI;QACF,wDAAwD;QACxD,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,SAClD,IAAI,CAAC,cACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,WACT,MAAM;QAET,IAAI,YAAY,MAAM;QAEtB,IAAI,WAAW,UAAU;YACvB,qCAAqC;YACrC,MAAM,MAAM,IAAI,IAAI,UAAU,QAAQ;YACtC,MAAM,YAAY,IAAI,QAAQ,CAAC,KAAK,CAAC;YACrC,MAAM,SAAS,SAAS,CAAC,UAAU,MAAM,GAAG,EAAE;YAC9C,MAAM,WAAW,SAAS,CAAC,UAAU,MAAM,GAAG,EAAE;YAChD,MAAM,WAAW,GAAG,OAAO,CAAC,EAAE,UAAU;YAExC,+BAA+B;YAC/B,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAAS,OAAO,CACnD,IAAI,CAAC,cACL,MAAM,CAAC;gBAAC;aAAS;YAEpB,IAAI,cAAc;gBAChB,QAAQ,KAAK,CAAC,2BAA2B;YACzC,iEAAiE;YACnE;QACF;QAEA,4FAA4F;QAC5F,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,cACL,MAAM,GACN,EAAE,CAAC,MAAM;QAEZ,IAAI,aAAa,MAAM;IACzB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM,IAAI,MAAM;IAClB;AACF","debugId":null}},
    {"offset": {"line": 3888, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n  )\r\n}"],"names":[],"mappings":";;;AAAA;AAAA;;AAEO,SAAS;IACd,OAAO,CAAA,GAAA,0KAAA,CAAA,sBAAmB,AAAD;AAI3B","debugId":null}},
    {"offset": {"line": 3903, "column": 0}, "map": {"version":3,"sources":["file://E%3A/breyholtz%20holding/arti-notes/project/src/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Link from 'next/link';\r\nimport { \r\n  FileText, \r\n  Clock, \r\n  Mic, \r\n  Settings, \r\n  ChevronRight,\r\n  BarChart,\r\n  Users,\r\n  Clock3,\r\n  Search,\r\n  Folder,\r\n  Tag as TagIcon,\r\n  X,\r\n  FolderPlus,\r\n  Edit2,\r\n  MoreVertical,\r\n  Pencil,\r\n  Trash2,\r\n  CheckSquare,\r\n  Square\r\n} from 'lucide-react';\r\n\r\nimport RecordingModal from '@/components/RecordingModal';\r\nimport FileUploadModal from '@/components/FileUploadModal';\r\nimport FolderRenameModal from '@/components/FolderRenameModal';\r\nimport DeleteConfirmationDialog from '@/components/DeleteConfirmationDialog';\r\nimport TagEditor from '@/components/TagEditor';\r\nimport Pagination from '@/components/Pagination';\r\nimport { cn } from '@/lib/utils';\r\nimport { useFolders } from '@/contexts/FolderContext';\r\nimport { getTags } from '@/services/tagService';\r\nimport { toast } from 'sonner';\r\nimport { deleteMeeting } from '@/services/meetingService';\r\nimport { createClient } from '@/utils/supabase/client';\r\n\r\ninterface Tag {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface Transcription {\r\n  summary_text?: string;\r\n  action_items?: string[];\r\n  summary_topics?: string[];\r\n  content?: Array<{\r\n    text: string;\r\n  }>;\r\n}\r\n\r\ninterface Recording {\r\n  id: string;\r\n  title: string;\r\n  created_at: string;\r\n  duration: number;\r\n  status: 'processing' | 'completed' | 'error';\r\n  folder_id?: string;\r\n  tags?: Array<{\r\n    id: string;\r\n    name: string;\r\n  }>;\r\n  transcription?: Transcription;\r\n}\r\n\r\nconst ITEMS_PER_PAGE = 10;\r\n\r\nexport default function DashboardPage() {\r\n  const router = useRouter();\r\n  const supabase = createClient();\r\n  const { folders, addFolder, removeFolder, updateFolder } = useFolders();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [activeFolder, setActiveFolder] = useState<string | null>(null);\r\n  const [activeTags, setActiveTags] = useState<Set<string>>(new Set());\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [showRecordingModal, setShowRecordingModal] = useState(false);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [recordings, setRecordings] = useState<Recording[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showNewFolderInput, setShowNewFolderInput] = useState(false);\r\n  const [newFolderName, setNewFolderName] = useState('');\r\n  const [activeFolderMenu, setActiveFolderMenu] = useState<string | null>(null);\r\n  const [showRenameModal, setShowRenameModal] = useState(false);\r\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\r\n  const [selectedFolderForAction, setSelectedFolderForAction] = useState<{ id: string; name: string } | null>(null);\r\n  const [showTagEditor, setShowTagEditor] = useState(false);\r\n  const [availableTags, setAvailableTags] = useState<Tag[]>([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [selectedRecordings, setSelectedRecordings] = useState<Set<string>>(new Set());\r\n  const [dateRange, setDateRange] = useState<'total' | 'day' | 'week' | 'month'>('total');\r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  const [isBulkEditMode, setIsBulkEditMode] = useState(false);\r\n  const [showBulkDeleteDialog, setShowBulkDeleteDialog] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchRecordings();\r\n    fetchTags();\r\n  }, [refreshTrigger]);\r\n\r\n  const handleRecordingComplete = () => {\r\n    setRefreshTrigger(prev => prev + 1);\r\n  };\r\n\r\n  const getFilteredRecordingsByDate = (recordings: Recording[]) => {\r\n    if (dateRange === 'total') return recordings;\r\n    \r\n    const now = new Date();\r\n    const startDate = new Date();\r\n    \r\n    switch (dateRange) {\r\n      case 'day':\r\n        startDate.setHours(0, 0, 0, 0);\r\n        break;\r\n      case 'week':\r\n        startDate.setDate(now.getDate() - now.getDay());\r\n        startDate.setHours(0, 0, 0, 0);\r\n        break;\r\n      case 'month':\r\n        startDate.setDate(1);\r\n        startDate.setHours(0, 0, 0, 0);\r\n        break;\r\n    }\r\n    \r\n    return recordings.filter(recording => {\r\n      const recordingDate = new Date(recording.created_at);\r\n      return recordingDate >= startDate && recordingDate <= now;\r\n    });\r\n  };\r\n\r\n  const fetchTags = async () => {\r\n    try {\r\n      const tags = await getTags();\r\n      setAvailableTags(tags);\r\n    } catch (err) {\r\n      console.error('Error fetching tags:', err);\r\n    }\r\n  };\r\n\r\n  const fetchRecordings = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n\r\n      const { data, error } = await supabase\r\n        .from('recordings')\r\n        .select(`\r\n          *,\r\n          tags:recording_tags(\r\n            tag:tag_id(\r\n              id,\r\n              name\r\n            )\r\n          )\r\n        `)\r\n        .order('created_at', { ascending: false });\r\n\r\n      if (error) throw error;\r\n\r\n      const transformedData = (data || []).map((recording: any) => ({\r\n        ...recording,\r\n        tags: recording.tags?.map((t: any) => t.tag)\r\n      }));\r\n\r\n      setRecordings(transformedData);\r\n    } catch (err) {\r\n      console.error('Error fetching recordings:', err);\r\n      setError('Kunne ikke hente opptak');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleTag = (tag: Tag) => {\r\n    setActiveTags(prev => {\r\n      const newTags = new Set(prev);\r\n      if (newTags.has(tag.id)) {\r\n        newTags.delete(tag.id);\r\n      } else {\r\n        newTags.add(tag.id);\r\n      }\r\n      return newTags;\r\n    });\r\n  };\r\n\r\n  const handleAddFolder = async () => {\r\n    if (!newFolderName.trim()) return;\r\n    \r\n    try {\r\n      await addFolder(newFolderName.trim());\r\n      setNewFolderName('');\r\n      setShowNewFolderInput(false);\r\n    } catch (error) {\r\n      console.error('Error adding folder:', error);\r\n    }\r\n  };\r\n\r\n  const handleFolderAction = (id: string, name: string, action: 'rename' | 'delete') => {\r\n    setSelectedFolderForAction({ id, name });\r\n    if (action === 'rename') {\r\n      setShowRenameModal(true);\r\n    } else {\r\n      setShowDeleteDialog(true);\r\n    }\r\n    setActiveFolderMenu(null);\r\n  };\r\n\r\n  const handleRenameFolder = async (newName: string) => {\r\n    if (!selectedFolderForAction) return;\r\n    \r\n    try {\r\n      await updateFolder(selectedFolderForAction.id, newName);\r\n      setShowRenameModal(false);\r\n      setSelectedFolderForAction(null);\r\n    } catch (error) {\r\n      console.error('Error renaming folder:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleDeleteFolder = async () => {\r\n    if (!selectedFolderForAction) return;\r\n    \r\n    try {\r\n      await removeFolder(selectedFolderForAction.id);\r\n      if (activeFolder === selectedFolderForAction.id) {\r\n        setActiveFolder(null);\r\n      }\r\n      setShowDeleteDialog(false);\r\n      setSelectedFolderForAction(null);\r\n    } catch (error) {\r\n      console.error('Error deleting folder:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const formatDuration = (seconds: number) => {\r\n    if (!Number.isFinite(seconds) || seconds < 0) return '0s';\r\n    \r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const remainingSeconds = Math.floor(seconds % 60);\r\n    \r\n    const parts = [];\r\n    \r\n    if (hours > 0) {\r\n      parts.push(`${hours}t`);\r\n    }\r\n    if (minutes > 0 || hours > 0) {\r\n      parts.push(`${minutes}m`);\r\n    }\r\n    if (remainingSeconds > 0 || parts.length === 0) {\r\n      parts.push(`${remainingSeconds}s`);\r\n    }\r\n    \r\n    return parts.join(' ');\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString('no', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const filterRecordings = (recordings: Recording[]) => {\r\n    let filtered = recordings;\r\n\r\n    // Full text search across multiple fields\r\n    if (searchQuery) {\r\n      const query = searchQuery.toLowerCase();\r\n      filtered = filtered.filter(recording => {\r\n        // Search in title\r\n        if (recording.title.toLowerCase().includes(query)) return true;\r\n        \r\n        // Search in transcription and summary if available\r\n        const transcription = recording.transcription;\r\n        if (transcription) {\r\n          // Search in summary\r\n          if (transcription.summary_text?.toLowerCase().includes(query)) return true;\r\n          \r\n          // Search in action items\r\n          if (transcription.action_items?.some((item: string) => \r\n            item.toLowerCase().includes(query)\r\n          )) return true;\r\n          \r\n          // Search in topics\r\n          if (transcription.summary_topics?.some((topic: string) => \r\n            topic.toLowerCase().includes(query)\r\n          )) return true;\r\n          \r\n          // Search in transcription content\r\n          if (transcription.content?.some((segment: { text: string }) => \r\n            segment.text.toLowerCase().includes(query)\r\n          )) return true;\r\n        }\r\n        \r\n        // Search in tags\r\n        if (recording.tags?.some(tag => \r\n          tag.name.toLowerCase().includes(query)\r\n        )) return true;\r\n        \r\n        // Search in folder name\r\n        const folder = folders.find(f => f.id === recording.folder_id);\r\n        if (folder?.name.toLowerCase().includes(query)) return true;\r\n        \r\n        return false;\r\n      });\r\n    }\r\n\r\n    if (activeFolder) {\r\n      filtered = filtered.filter(recording => recording.folder_id === activeFolder);\r\n    }\r\n\r\n    if (activeTags.size > 0) {\r\n      filtered = filtered.filter(recording =>\r\n        recording.tags?.some(tag => activeTags.has(tag.id))\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  };\r\n\r\n  const filteredRecordings = filterRecordings(recordings);\r\n  const totalPages = Math.ceil(filteredRecordings.length / ITEMS_PER_PAGE);\r\n  \r\n  const getCurrentPageRecordings = () => {\r\n    const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\r\n    return filteredRecordings.slice(startIndex, startIndex + ITEMS_PER_PAGE);\r\n  };\r\n\r\n  const handleStartRecording = () => {\r\n    setShowRecordingModal(true);\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selectedRecordings.size === 0) return;\r\n    \r\n    setIsBulkEditMode(false);\r\n    setShowBulkDeleteDialog(false);\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      setError(null);\r\n      \r\n      // Delete each selected recording\r\n      for (const recordingId of selectedRecordings) {\r\n        await deleteMeeting(recordingId);\r\n      }\r\n      \r\n      // Clear selection and refresh list\r\n      setSelectedRecordings(new Set());\r\n      setRefreshTrigger(prev => prev + 1);\r\n      \r\n      toast.success(`${selectedRecordings.size} opptak ble slettet`);\r\n    } catch (err) {\r\n      console.error('Error deleting recordings:', err);\r\n      setError('Kunne ikke slette opptakene');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleRecordingSelection = (recordingId: string) => {\r\n    setSelectedRecordings(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(recordingId)) {\r\n        newSet.delete(recordingId);\r\n      } else {\r\n        newSet.add(recordingId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen pt-16 bg-gray-50/50\">\r\n      <div className=\"max-w-7xl mx-auto p-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-semibold mb-1\">Mine opptak</h1>\r\n            <p className=\"text-gray-600\">Her finner du alle dine møteopptak</p>\r\n          </div>\r\n          <div className=\"bg-white rounded-lg shadow-sm p-1 inline-flex\">\r\n            <button\r\n              onClick={() => setDateRange('total')}\r\n              className={cn(\r\n                \"px-4 py-2 text-sm font-medium rounded-md transition-colors\",\r\n                dateRange === 'total'\r\n                  ? \"bg-violet-100 text-violet-700\"\r\n                  : \"text-gray-600 hover:text-violet-600\"\r\n              )}\r\n            >\r\n              Totalt\r\n            </button>\r\n            <button\r\n              onClick={() => setDateRange('day')}\r\n              className={cn(\r\n                \"px-4 py-2 text-sm font-medium rounded-md transition-colors\",\r\n                dateRange === 'day'\r\n                  ? \"bg-violet-100 text-violet-700\"\r\n                  : \"text-gray-600 hover:text-violet-600\"\r\n              )}\r\n            >\r\n              I dag\r\n            </button>\r\n            <button\r\n              onClick={() => setDateRange('week')}\r\n              className={cn(\r\n                \"px-4 py-2 text-sm font-medium rounded-md transition-colors\",\r\n                dateRange === 'week'\r\n                  ? \"bg-violet-100 text-violet-700\"\r\n                  : \"text-gray-600 hover:text-violet-600\"\r\n              )}\r\n            >\r\n              Denne uken\r\n            </button>\r\n            <button\r\n              onClick={() => setDateRange('month')}\r\n              className={cn(\r\n                \"px-4 py-2 text-sm font-medium rounded-md transition-colors\",\r\n                dateRange === 'month'\r\n                  ? \"bg-violet-100 text-violet-700\"\r\n                  : \"text-gray-600 hover:text-violet-600\"\r\n              )}\r\n            >\r\n              Denne måneden\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Stats Overview */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n          <div className=\"feature-card\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 mb-1\">Totalt antall opptak</p>\r\n                <h3 className=\"text-2xl font-semibold\">\r\n                  {getFilteredRecordingsByDate(recordings).length}\r\n                </h3>\r\n              </div>\r\n              <BarChart className=\"h-8 w-8 text-violet-600\" />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"feature-card\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 mb-1\">Timer totalt</p>\r\n                <h3 className=\"text-2xl font-semibold\">\r\n                  {(() => {\r\n                    const totalSeconds = getFilteredRecordingsByDate(recordings)\r\n                      .reduce((acc, rec) => acc + (rec.duration || 0), 0);\r\n                    const hours = Math.floor(totalSeconds / 3600);\r\n                    const minutes = Math.floor((totalSeconds % 3600) / 60);\r\n                    return `${hours}t ${minutes}m`;\r\n                  })()}\r\n                </h3>\r\n              </div>\r\n              <Clock3 className=\"h-8 w-8 text-violet-600\" />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"feature-card\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <p className=\"text-sm text-gray-600 mb-1\">Tid spart</p>\r\n                  <div className=\"group relative\">\r\n                    <div className=\"w-4 h-4 rounded-full bg-gray-100 flex items-center justify-center cursor-help\">\r\n                      <span className=\"text-xs text-gray-500 font-medium\">i</span>\r\n                    </div>\r\n                    <div className=\"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200\">\r\n                      <div className=\"text-center\">\r\n                        Estimert tid spart basert på automatisk generering av møtereferat, hovedtemaer og handlingspunkter.\r\n                      </div>\r\n                      <div className=\"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 w-2 h-2 bg-gray-900 rotate-45\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <h3 className=\"text-2xl font-semibold\">\r\n                  {(() => {\r\n                    const totalSeconds = getFilteredRecordingsByDate(recordings)\r\n                      .reduce((acc, rec) => acc + (rec.duration || 0), 0);\r\n                    const savedSeconds = totalSeconds * 0.5; // 50% time saved\r\n                    const hours = Math.floor(savedSeconds / 3600);\r\n                    const minutes = Math.floor((savedSeconds % 3600) / 60);\r\n                    \r\n                    if (hours > 0) {\r\n                      return `${hours}t ${minutes}m`;\r\n                    } else if (minutes > 0) {\r\n                      return `${minutes}m`;\r\n                    } else {\r\n                      return '0m';\r\n                    }\r\n                  })()}\r\n                </h3>\r\n              </div>\r\n              <Clock3 className=\"h-8 w-8 text-violet-600\" />\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"feature-card\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600 mb-1\">Snitt varighet</p>\r\n                {recordings.length > 0 ? (\r\n                  <h3 className=\"text-2xl font-semibold\">\r\n                    {(() => {\r\n                      const filteredRecordings = getFilteredRecordingsByDate(recordings);\r\n                      const avgSeconds = filteredRecordings.reduce((acc, rec) => acc + (rec.duration || 0), 0) / \r\n                        (filteredRecordings.length || 1);\r\n                      const hours = Math.floor(avgSeconds / 3600);\r\n                      const minutes = Math.floor((avgSeconds % 3600) / 60);\r\n                      const seconds = Math.floor(avgSeconds % 60);\r\n                      \r\n                      if (hours > 0) {\r\n                        return `${hours}t ${minutes}m`;\r\n                      } else if (minutes > 0) {\r\n                        return `${minutes}m ${seconds}s`;\r\n                      } else {\r\n                        return `${seconds}s`;\r\n                      }\r\n                    })()}\r\n                  </h3>\r\n                ) : (\r\n                  <h3 className=\"text-2xl font-semibold\">0s</h3>\r\n                )}\r\n              </div>\r\n              <Clock className=\"h-8 w-8 text-violet-600\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n          <button \r\n            className={cn(\r\n              \"feature-card flex items-center\",\r\n              isRecording ? 'border-red-500 bg-red-50' : ''\r\n            )}\r\n            onClick={handleStartRecording}\r\n          >\r\n            <div className={cn(\r\n              \"feature-icon mr-4\",\r\n              isRecording ? 'bg-red-600' : ''\r\n            )}>\r\n              <Mic className=\"h-5 w-5\" />\r\n            </div>\r\n            <div className=\"text-left\">\r\n              <h3 className=\"font-medium mb-1\">\r\n                {isRecording ? 'Stopp opptak' : 'Start opptak'}\r\n              </h3>\r\n              <p className=\"text-sm text-gray-600\">\r\n                {isRecording ? 'Opptak pågår...' : 'Begynn å ta opp et møte nå'}\r\n              </p>\r\n            </div>\r\n          </button>\r\n          \r\n          <button \r\n            className=\"feature-card flex items-center\"\r\n            onClick={() => setShowUploadModal(true)}\r\n          >\r\n            <div className=\"feature-icon mr-4\">\r\n              <FileText className=\"h-5 w-5\" />\r\n            </div>\r\n            <div className=\"text-left\">\r\n              <h3 className=\"font-medium mb-1\">Last opp opptak</h3>\r\n              <p className=\"text-sm text-gray-600\">Last opp eksisterende lydopptak</p>\r\n            </div>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Organization and Search */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6\">\r\n          {/* Folders and Tags Sidebar */}\r\n          <div className=\"lg:col-span-1 space-y-6\">\r\n            {/* Folders */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"font-medium\">Mapper</h3>\r\n                <button \r\n                  onClick={() => setShowNewFolderInput(true)}\r\n                  className=\"p-1.5 hover:bg-gray-100 rounded-lg text-gray-600\"\r\n                >\r\n                  <FolderPlus className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n              \r\n              {showNewFolderInput && (\r\n                <div className=\"flex items-center space-x-2 mb-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newFolderName}\r\n                    onChange={(e) => setNewFolderName(e.target.value)}\r\n                    placeholder=\"Mappenavn...\"\r\n                    className=\"flex-1 px-3 py-1.5 text-sm rounded-lg border border-gray-300 focus:border-violet-500 focus:ring-violet-500\"\r\n                    onKeyDown={(e) => {\r\n                      if (e.key === 'Enter') handleAddFolder();\r\n                      if (e.key === 'Escape') setShowNewFolderInput(false);\r\n                    }}\r\n                  />\r\n                  <button\r\n                    onClick={handleAddFolder}\r\n                    className=\"p-1.5 bg-violet-600 text-white rounded-lg hover:bg-violet-700\"\r\n                  >\r\n                    <FolderPlus className=\"h-4 w-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setShowNewFolderInput(false)}\r\n                    className=\"p-1.5 hover:bg-gray-100 rounded-lg\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"space-y-1\">\r\n                <button\r\n                  onClick={() => setActiveFolder(null)}\r\n                  className={cn(\r\n                    \"w-full flex items-center px-3 py-2 rounded-lg text-sm transition-colors\",\r\n                    !activeFolder ? \"bg-violet-50 text-violet-600\" : \"text-gray-600 hover:bg-gray-50\"\r\n                  )}\r\n                >\r\n                  <Folder className=\"h-4 w-4 mr-2\" />\r\n                  Alle mapper\r\n                </button>\r\n\r\n                {folders.map(folder => (\r\n                  <div\r\n                    key={folder.id}\r\n                    className=\"relative group\"\r\n                  >\r\n                    <button\r\n                      onClick={() => setActiveFolder(folder.id)}\r\n                      className={cn(\r\n                        \"w-full flex items-center px-3 py-2 rounded-lg text-sm transition-colors\",\r\n                        activeFolder === folder.id ? \"bg-violet-50 text-violet-600\" : \"text-gray-600 hover:bg-gray-50\"\r\n                      )}\r\n                    >\r\n                      <Folder className=\"h-4 w-4 mr-2\" />\r\n                      {folder.name}\r\n                    </button>\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setActiveFolderMenu(activeFolderMenu === folder.id ? null : folder.id);\r\n                      }}\r\n                      className={cn(\r\n                        \"absolute right-2 top-1/2 -translate-y-1/2 p-1 rounded-lg transition-opacity\",\r\n                        activeFolderMenu === folder.id ? \"opacity-100\" : \"opacity-0 group-hover:opacity-100\"\r\n                      )}\r\n                    >\r\n                      <MoreVertical className=\"h-4 w-4 text-gray-400\" />\r\n                    </button>\r\n                    {activeFolderMenu === folder.id && (\r\n                      <div className=\"absolute right-0 top-0 mt-8 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-10\">\r\n                        <button\r\n                          onClick={() => handleFolderAction(folder.id, folder.name, 'rename')}\r\n                          className=\"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\r\n                        >\r\n                          <Pencil className=\"h-4 w-4 mr-2\" />\r\n                          Endre navn\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleFolderAction(folder.id, folder.name, 'delete')}\r\n                          className=\"w-full flex items-center px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                          Slett mappe\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Tags */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-4\">\r\n              <div className=\"flex items-center justify-between mb-4\">\r\n                <h3 className=\"font-medium\">Etiketter</h3>\r\n                <button \r\n                  onClick={() => setShowTagEditor(true)}\r\n                  className=\"p-1.5 hover:bg-gray-100 rounded-lg text-gray-600\"\r\n                >\r\n                  <Edit2 className=\"h-4 w-4\" />\r\n                </button>\r\n              </div>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {availableTags.map(tag => (\r\n                  <button\r\n                    key={tag.id}\r\n                    onClick={() => toggleTag(tag)}\r\n                    className={cn(\r\n                      \"inline-flex items-center px-3 py-1 rounded-full text-sm transition-colors\",\r\n                      activeTags.has(tag.id)\r\n                        ? \"bg-violet-600 text-white\"\r\n                        : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n                    )}\r\n                  >\r\n                    <TagIcon className=\"h-3 w-3 mr-1\" />\r\n                    {tag.name}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Recordings List */}\r\n          <div className=\"lg:col-span-3 space-y-6\">\r\n            {/* Search */}\r\n            <div className=\"bg-white rounded-xl shadow-sm p-4\">\r\n              <div className=\"relative\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"flex-1\">\r\n                <input\r\n                  type=\"search\"\r\n                  placeholder=\"Søk i opptak, transkripsjoner, etiketter...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"w-full px-4 py-3 rounded-lg border border-gray-300 pl-10 focus:border-violet-500 focus:ring-violet-500\"\r\n                />\r\n                {searchQuery ? (\r\n                  <button\r\n                    onClick={() => setSearchQuery('')}\r\n                    className=\"absolute right-3 top-2.5\"\r\n                  >\r\n                    <X className=\"h-5 w-5 text-gray-400 hover:text-gray-600\" />\r\n                  </button>\r\n                ) : (\r\n                  <Search className=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\" />\r\n                )}\r\n                  </div>\r\n                  <button\r\n                    onClick={() => {\r\n                      setIsBulkEditMode(!isBulkEditMode);\r\n                      if (!isBulkEditMode) {\r\n                        setSelectedRecordings(new Set());\r\n                      }\r\n                    }}\r\n                    className={cn(\r\n                      \"ml-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors\",\r\n                      isBulkEditMode\r\n                        ? \"bg-violet-100 text-violet-700\"\r\n                        : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n                    )}\r\n                  >\r\n                    {isBulkEditMode ? 'Avslutt redigering' : 'Rediger møter'}\r\n                  </button>\r\n                </div>\r\n                <div className=\"mt-2 text-xs text-gray-500\">\r\n                  Søk i titler, etiketter og mapper\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Recordings */}\r\n            <div className=\"space-y-4\">\r\n              {isLoading ? (\r\n                <div className=\"text-center py-8\">\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-violet-600 mx-auto\"></div>\r\n                  <p className=\"text-gray-600 mt-4\">Henter opptak...</p>\r\n                </div>\r\n              ) : error ? (\r\n                <div className=\"text-center py-8 text-red-600\">{error}</div>\r\n              ) : getCurrentPageRecordings().length === 0 ? (\r\n                <div className=\"text-center py-8 text-gray-600\">\r\n                  {searchQuery \r\n                    ? 'Ingen opptak funnet for dette søket'\r\n                    : activeFolder\r\n                    ? 'Ingen opptak i denne mappen'\r\n                    : activeTags.size > 0\r\n                    ? 'Ingen opptak med valgte etiketter'\r\n                    : 'Ingen opptak funnet'}\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  {getCurrentPageRecordings().map((recording) => (\r\n                    <div\r\n                      key={recording.id}\r\n                      className={cn(\r\n                        \"feature-card flex items-center justify-between group\",\r\n                        selectedRecordings.has(recording.id) && \"bg-violet-50/50 border-violet-200\"\r\n                      )}\r\n                    >\r\n                      <div\r\n                        className=\"flex-1 flex items-center space-x-4\"\r\n                      >\r\n                        {isBulkEditMode && (\r\n                        <button\r\n                          onClick={() => toggleRecordingSelection(recording.id)}\r\n                          className=\"p-2 hover:bg-violet-100 rounded-lg transition-colors\"\r\n                        >\r\n                          {selectedRecordings.has(recording.id) ? (\r\n                            <CheckSquare className=\"h-5 w-5 text-violet-600\" />\r\n                          ) : (\r\n                            <Square className=\"h-5 w-5 text-gray-400\" />\r\n                          )}\r\n                        </button>\r\n                        )}\r\n                        <div className={cn(\r\n                          \"p-3 rounded-xl\",\r\n                          recording.status === 'completed'\r\n                            ? 'bg-green-100 text-green-600'\r\n                            : recording.status === 'processing'\r\n                            ? 'bg-yellow-100 text-yellow-600'\r\n                            : 'bg-red-100 text-red-600'\r\n                        )}>\r\n                          <Mic className=\"h-5 w-5\" />\r\n                        </div>\r\n                        <Link\r\n                          href={`/meetings/${recording.id}`}\r\n                          className=\"min-w-0 flex-1 flex items-center group\"\r\n                        >\r\n                          <div className=\"flex-1\">\r\n                            <h3 className=\"font-medium mb-1\">{recording.title}</h3>\r\n                            <div className=\"flex items-center text-sm text-gray-600 mb-2\">\r\n                              <Clock className=\"h-4 w-4 mr-1\" />\r\n                              <span>{formatDate(recording.created_at)}</span>\r\n                              <span className=\"mx-2\">•</span>\r\n                              <span>{formatDuration(recording.duration)}</span>\r\n                            </div>\r\n                            <div className=\"flex flex-wrap items-center gap-2\">\r\n                              {recording.folder_id && (\r\n                                <span className=\"inline-flex items-center px-2 py-1 rounded-md bg-violet-50 text-violet-600 text-xs\">\r\n                                  <Folder className=\"h-3 w-3 mr-1\" />\r\n                                  {folders.find(f => f.id === recording.folder_id)?.name}\r\n                              </span>\r\n                              )}\r\n                              {recording.tags?.map(tag => (\r\n                                <span \r\n                                  key={tag.id}\r\n                                  className=\"inline-flex items-center px-2 py-1 rounded-md bg-gray-100 text-gray-600 text-xs\"\r\n                                >\r\n                                  <TagIcon className=\"h-3 w-3 mr-1\" />\r\n                                  {tag.name}\r\n                                </span>\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                          <ChevronRight className=\"h-5 w-5 text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity ml-4\" />\r\n                        </Link>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n\r\n                  {/* Bulk Delete Controls */}\r\n                  {selectedRecordings.size > 0 && (\r\n                    <div className=\"fixed bottom-6 left-1/2 -translate-x-1/2 bg-white rounded-xl shadow-lg border border-gray-200 p-4 flex items-center space-x-4\">\r\n                      <span className=\"text-sm text-gray-600\">\r\n                        {selectedRecordings.size} opptak valgt\r\n                      </span>\r\n                      <button\r\n                        onClick={() => setShowBulkDeleteDialog(true)}\r\n                        className=\"button-primary bg-red-600 hover:bg-red-700 flex items-center\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4 mr-2\" />\r\n                        Slett valgte\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setSelectedRecordings(new Set())}\r\n                        className=\"button-secondary\"\r\n                      >\r\n                        Avbryt\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Pagination */}\r\n                  {totalPages > 1 && (\r\n                    <div className=\"mt-8\">\r\n                      <Pagination\r\n                        currentPage={currentPage}\r\n                        totalPages={totalPages}\r\n                        onPageChange={setCurrentPage}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      <RecordingModal \r\n        isOpen={showRecordingModal}\r\n        onClose={() => setShowRecordingModal(false)}\r\n        onComplete={handleRecordingComplete}\r\n      />\r\n\r\n      <FileUploadModal\r\n        isOpen={showUploadModal}\r\n        onClose={() => setShowUploadModal(false)}\r\n        onUploadComplete={handleRecordingComplete}\r\n      />\r\n\r\n      <FolderRenameModal\r\n        isOpen={showRenameModal}\r\n        onClose={() => {\r\n          setShowRenameModal(false);\r\n          setSelectedFolderForAction(null);\r\n        }}\r\n        onRename={handleRenameFolder}\r\n        currentName={selectedFolderForAction?.name || ''}\r\n      />\r\n\r\n      <DeleteConfirmationDialog\r\n        isOpen={showDeleteDialog}\r\n        onClose={() => {\r\n          setShowDeleteDialog(false);\r\n          setSelectedFolderForAction(null);\r\n        }}\r\n        onConfirm={handleDeleteFolder}\r\n        title=\"Slett mappe\"\r\n        message={`Er du sikker på at du vil slette mappen \"${selectedFolderForAction?.name}\"? Alle opptak i mappen vil bli flyttet til \"Alle mapper\".`}\r\n      />\r\n\r\n      <TagEditor\r\n        isOpen={showTagEditor}\r\n        onClose={() => setShowTagEditor(false)}\r\n        onSave={fetchTags}\r\n      />\r\n      \r\n      <DeleteConfirmationDialog\r\n        isOpen={showBulkDeleteDialog}\r\n        onClose={() => setShowBulkDeleteDialog(false)}\r\n        onConfirm={handleBulkDelete}\r\n        title=\"Slett opptak\"\r\n        message={`Er du sikker på at du vil slette ${selectedRecordings.size} opptak? Denne handlingen kan ikke angres.`}\r\n      />\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}